<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>HugeGraph â€“ Blog</title><link>/cn/blog/</link><description>Recent content in Blog on HugeGraph</description><generator>Hugo -- gohugo.io</generator><atom:link href="/cn/blog/index.xml" rel="self" type="application/rss+xml"/><item><title>Blog: Agentic GraphRAG</title><link>/cn/blog/2025/10/29/agentic-graphrag/</link><pubDate>Wed, 29 Oct 2025 00:00:00 +0000</pubDate><guid>/cn/blog/2025/10/29/agentic-graphrag/</guid><description>
&lt;h1 id="é¡¹ç›®èƒŒæ™¯">é¡¹ç›®èƒŒæ™¯&lt;/h1>
&lt;p>ä¸ºäº†åº”å¯¹æ¨¡å‹è®­ç»ƒæ•°æ®å’Œç°å®ç”Ÿæ´»ä¸­å®é™…æ•°æ®ä¹‹é—´å­˜åœ¨çš„æ—¶æ•ˆæ€§å·®å¼‚é—®é¢˜ï¼ŒRAGæŠ€æœ¯åº”è¿è€Œç”Ÿã€‚RAGï¼Œé¡¾åæ€ä¹‰å°±æ˜¯é€šè¿‡å‘å¤–éƒ¨æ•°æ®æºè·å–å¯¹åº”çš„æ•°æ®ï¼ˆRetrievalï¼‰ï¼Œç”¨äºå¢å¼ºï¼ˆArgumentï¼‰å¤§æ¨¡å‹ç”Ÿæˆï¼ˆGenerationï¼‰å›ç­”è´¨é‡çš„æŠ€æœ¯ã€‚&lt;/p>
&lt;p>æœ€æ—©çš„RAGé‡‡ç”¨ç®€å•çš„Retrieval - Generationæ¶æ„ï¼Œæˆ‘ä»¬æ‹¿åˆ°ç”¨æˆ·ç»™å‡ºçš„é—®é¢˜ï¼Œè¿›è¡Œä¸€å®šçš„é¢„å¤„ç†ï¼ˆå…³é”®è¯æå–ç­‰ç­‰ï¼‰ï¼Œå¾—åˆ°é¢„å¤„ç†ä¹‹åçš„é—®é¢˜ï¼Œæ¥ç€é€šè¿‡Embedding Modelä»æµ·é‡èµ„æ–™ä¸­æŠ“å–ç›¸å…³çš„èµ„æ–™ä½œä¸ºPromptäº¤ç»™å¤§æ¨¡å‹ç”¨äºå¢å¼ºæ¨¡å‹å›ç­”çš„è´¨é‡ã€‚&lt;/p>
&lt;p>ä½†æ˜¯åŸºäºè¯­ä¹‰ç›¸ä¼¼æ€§åŒ¹é…è¿›è¡Œç›¸å…³è¯­æ–™çš„æŠ“å–æœªå¿…èƒ½å¤Ÿå¤„ç†æ‰€æœ‰æƒ…å†µï¼Œå› ä¸ºèƒ½å¤Ÿç”¨äºå¢å¼ºå›ç­”è´¨é‡çš„è¯­æ–™ä¸ä¸€å®šå’Œé—®é¢˜æœ¬èº«å­˜åœ¨è¯­ä¹‰ç›¸ä¼¼æ€§ã€‚ä¸€ä¸ªå¸¸è§çš„ä¾‹å­å°±æ˜¯ï¼š**å‘Šè¯‰æˆ‘â€œæå‡ºæ°´æ˜¯ä¸‡ç‰©çš„æœ¬æºâ€çš„å“²å­¦å®¶çš„å¾’å¼Ÿæå‡ºçš„æœ¬ä½“è®ºè§‚ç‚¹ã€‚**è€Œæˆ‘ä»¬çš„è¯­æ–™ä¸­å¹¶ä¸ç›´æ¥å­˜åœ¨è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œè¯­æ–™åº“ä¸­å¯èƒ½æåˆ°ï¼š&lt;/p>
&lt;ol>
&lt;li>æ³°å‹’æ–¯æå‡ºæ°´æ˜¯ä¸‡ç‰©çš„æœ¬æº&lt;/li>
&lt;li>æ³°å‹’æ–¯çš„å¼Ÿå­æœ‰é˜¿çº³å…‹è¥¿æ›¼å¾·&lt;/li>
&lt;li>é˜¿çº³å…‹è¥¿æ›¼å¾·å°†æ²¡æœ‰ä»»ä½•å½¢å¼è§„å®šæ€§çš„é˜¿æ´¾æœ—è®¤å®šä¸ºä¸‡ç‰©çš„æœ¬æº&lt;/li>
&lt;/ol>
&lt;p>å¦‚æœå•çº¯ä»è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…å‡ºå‘ï¼Œæˆ‘ä»¬å¤§æ¦‚ç‡åªèƒ½retrievalåˆ°ç¬¬ä¸€ä¸ªå¥å­ç”¨äºå¢å¼ºå¤§æ¨¡å‹çš„å›ç­”ã€‚ä½†æ˜¯ç¼ºå¤±è¯­æ–™2å’Œè¯­æ–™3çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬æ‰€ä½¿ç”¨çš„å¤§æ¨¡å‹è®­ç»ƒè¯­æ–™ä¸­æ²¡æœ‰å“²å­¦ç›¸å…³çŸ¥è¯†ï¼Œåœ¨ç¼ºå¤±è¿™äº›å…³é”®ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œå¤§æ¨¡å‹å°†æ— æ³•æ­£ç¡®å›ç­”è¿™äº›é—®é¢˜ï¼Œç”šè‡³ä¼šå‡ºç°â€œå¹»è§‰â€ã€‚&lt;/p>
&lt;p>å› æ­¤GraphRAGæŠ€æœ¯è¯ç”Ÿäº†ï¼Œå¸¸è§çš„GraphRAGåŒ…å«ä¸¤ä¸ªæ­¥éª¤ï¼š&lt;/p>
&lt;ol>
&lt;li>Offline: æˆ‘ä»¬éœ€è¦ç¦»çº¿å¯¹è¯­æ–™åº“è¿›è¡Œå›¾ç´¢å¼•çš„æ„å»ºï¼ˆå°†éç»“æ„åŒ–è¯­æ–™è½¬åŒ–ä¸ºç»“æ„åŒ–æ•°æ®å­˜å‚¨åˆ°å›¾æ•°æ®åº“ä¸­ï¼‰&lt;/li>
&lt;li>Online: å½“GraphRAGç³»ç»Ÿæ¥æ”¶åˆ°ç”¨æˆ·é—®é¢˜æ—¶ï¼Œæ ¹æ®å›¾æ•°æ®åº“æ•æ‰åˆ°çš„è¯­æ–™åº“ä¸­ä¸åŒå®ä½“ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ä»å›¾æ•°æ®åº“ä¸­æŠ“å–åˆ°ä¸Šé¢çš„ä¸‰å¥è¯ï¼ˆå…·ä½“å›¾æ•°æ®åº“ç´¢å¼•å¯èƒ½å¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰&lt;/li>
&lt;/ol>
&lt;div style="text-align: center;">
&lt;img src="/blog/images/images-server/agentic-background.png" alt="image" width="400">
&lt;/div>
&lt;p>ä½†æ˜¯GraphRAGæœ¬èº«ä¹Ÿå­˜åœ¨å‡ ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>å¦‚ä½•æ„å»ºGraph Indexæ˜¯ä¸€é—¨å­¦é—®ï¼ŒGraph Indexä¼šå½±å“åˆ°æ¨¡å‹å›ç­”è´¨é‡ã€‚&lt;/li>
&lt;li>GraphRAGç´¢å¼•æ„å»ºè¿‡ç¨‹Tokenæ¶ˆè€—å·¨å¤§&lt;/li>
&lt;li>GraphRAGä¸­å­˜åœ¨å„ç§å„æ ·çš„å›¾ç®—æ³•ï¼Œå¦‚ä½•Retrievalæ•ˆæœæœ€å¥½å‘¢ï¼Ÿï¼ˆé…ç½®ç©ºé—´è¿‡å¤§ï¼‰&lt;/li>
&lt;/ol>
&lt;p>æœ¬æ¬¡é¡¹ç›®ä¸»è¦é’ˆå¯¹ç¬¬ä¸‰ä¸ªé—®é¢˜å±•å¼€ã€‚æˆ‘ä»¬å¸Œæœ›å€ŸåŠ©å¤§æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ä½¿å…¶è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·é—®é¢˜ä¸­çš„æ„å›¾ï¼Œç„¶åé€‰æ‹©åˆé€‚é…ç½®ï¼ˆæ¯”å¦‚é€‰æ‹©æœ€åˆé€‚çš„å›¾ç®—æ³•ï¼‰ä»å›¾æ•°æ®åº“ä¸­è¯»å–å¯¹åº”çš„æ•°æ®ç”¨äºå¢å¼ºå¤§æ¨¡å‹å›ç­”è´¨é‡â€”â€”ä¹Ÿå°±æ˜¯æœ¬æ¬¡é¡¹ç›®Agentic GraphRAGçš„ç›®çš„æ‰€åœ¨ã€‚&lt;/p>
&lt;h1 id="ç°æœ‰-workflowä¼˜é›…çš„è§£è€¦æœªç«Ÿçš„å¹¶è¡Œ">&lt;strong>ç°æœ‰ Workflowï¼šä¼˜é›…çš„è§£è€¦ï¼Œæœªç«Ÿçš„å¹¶è¡Œ&lt;/strong>&lt;/h1>
&lt;p>ç°åœ¨çš„HugeGraph-AIé¡¹ç›®ä¸­å­˜åœ¨ä¸¤ä¸ªæ ¸å¿ƒæŠ½è±¡ï¼š&lt;/p>
&lt;ol>
&lt;li>Operatorï¼šè¡¨ç¤ºã€ŒåŸå­å¼çš„æ“ä½œå•å…ƒã€ï¼Œè´Ÿè´£å®Œæˆä¸€ä¸ªæ˜ç¡®çš„å­ä»»åŠ¡ï¼Œå¦‚å‘é‡ç´¢å¼•æ„å»ºã€å‘é‡ç›¸ä¼¼åº¦æŸ¥è¯¢ã€å›¾æ•°æ®ç›¸å…³æ“ä½œç­‰ç­‰&lt;/li>
&lt;li>Workflowï¼šç”±Operatorä½œä¸ºèŠ‚ç‚¹æ„æˆçš„&lt;strong>é“¾çŠ¶&lt;/strong>æ‰§è¡Œæµã€‚é¡¹ç›®ä¸­é¢„å®šä¹‰å¥½çš„Workflowå’Œé¡¹ç›®Demoç”¨ä¾‹ä¸€ä¸€å¯¹åº”ï¼ˆå¦‚GraphRAGï¼Œ Vector-Similarity-Based RAGï¼‰&lt;/li>
&lt;/ol>
&lt;p>ç”±äºOperatorçš„å®ç°éœ€è¦éµå¾ªä¸‹é¢çš„æ¥å£:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">Operator&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5c35cc;font-weight:bold">@abstractmethod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">run&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87">dict&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#204a87">str&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">Any&lt;/span>&lt;span style="color:#000;font-weight:bold">])&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&amp;gt;&lt;/span> &lt;span style="color:#204a87">dict&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#204a87">str&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>&lt;span style="color:#000">Any&lt;/span>&lt;span style="color:#000;font-weight:bold">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000;font-weight:bold">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Operatoråœ¨å®é™…è¿è¡Œæ—¶æ¥å—å­—å…¸ç±»å‹çš„contextå¯¹è±¡ä½œä¸ºè¾“å…¥ï¼Œè¿”å›çš„å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå¯ä»¥ç”¨æ¥ä½œä¸ºä¸‹ä¸€ä¸ªOperatorçš„è¾“å…¥ï¼Œè¿™æ ·çš„è®¾è®¡æœ‰ä¸€ä¸ªå¾ˆé«˜æ˜çš„åœ°æ–¹â€”â€”ä»–å°†ä¸åŒçš„Operatorä¹‹é—´çš„ä¾èµ–å…³ç³»å’ŒOperatoræœ¬èº«çš„å…·ä½“å®ç°è§£è€¦äº†ï¼Œæ¯ä¸ªOperatoræ˜¯ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„å­˜åœ¨ï¼Œå¦‚æœOperator Aéœ€è¦ä¾èµ–Operator Bçš„è¾“å‡ºï¼Œé‚£ä¹ˆåªéœ€è¦æ£€æŸ¥contextå¯¹è±¡ä¸­æ˜¯å¦å­˜æœ‰Operator Bçš„è¾“å‡ºå³å¯ã€‚è¿™æ˜¯ä¸€ç§ä½è€¦åˆçš„è®¾è®¡ã€‚å¥½å¤„æ˜¯æˆ‘ä»¬èƒ½å¾ˆæ–¹ä¾¿åœ°å°†ä¸åŒçš„Operatorè‡ªç”±ç»„åˆã€‚æ ¹æ®ä¸åŒçš„ç”¨æˆ·è¾“å…¥ç»„è£…ï¼ˆé…ç½®ï¼‰åˆé€‚Workflow Servingç”¨æˆ·è¯·æ±‚ï¼Œé‚£ä¸æ­£æ˜¯æˆ‘ä»¬åœ¨é¡¹ç›®èƒŒæ™¯ä¸­æåˆ°çš„Agentic GraphRAGçš„ç›®çš„æ‰€åœ¨å—ï¼Ÿ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>ğŸ‘‰ğŸ¼ ç†è®ºä¸Šç°æœ‰è®¾è®¡å·²ç»å¯ä»¥æ­£å¸¸è¿‡æ¸¡åˆ°Agentic GraphRAGï¼Œä½†æ˜¯ç°æœ‰è®¾è®¡å­˜åœ¨è¯¸å¤šæ‚¬è€Œæœªå†³çš„é—®é¢˜ï¼š
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1. ç°æœ‰è°ƒåº¦å™¨ä»…ä»…æ”¯æŒé“¾çŠ¶Workflowï¼Œç¼ºå¤±äº†å¯èƒ½å­˜åœ¨çš„å¹¶è¡Œç©ºé—´
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 2. ç°æœ‰è°ƒåº¦å™¨æ— æ³•å¤ç”¨è¢«åå¤ä½¿ç”¨åˆ°çš„Workflow
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="æ‰“ç ´é“¾å¼æŸç¼šæ‹¥æŠ±å…¨æ–°æ¶æ„">æ‰“ç ´é“¾å¼æŸç¼šï¼Œæ‹¥æŠ±å…¨æ–°æ¶æ„&lt;/h1>
&lt;p>ä¹‹å‰çš„è°ƒåº¦å™¨ç»™æˆ‘ä»¬çš„å¯å‘æ˜¯Operatorç²’åº¦çš„è§£è€¦æ˜¯ä¸€ä¸ªä¸é”™çš„è®¾è®¡ç†å¿µï¼Œä½†æ˜¯è°ƒåº¦å™¨æœ¬èº«èƒ½åŠ›æœ‰é™ï¼Œé™åˆ¶äº†Workflowçš„èƒ½åŠ›ã€‚å› æ­¤æˆ‘ä»¬è®¡åˆ’æ›¿æ¢é¡¹ç›®ä¸­çš„è°ƒåº¦å™¨ï¼ç»è¿‡å¯¹å‡ ç§ä¸åŒçš„Workflowç¼–æ’æ¡†æ¶è¿›è¡Œç®€å•çš„è°ƒç ”ä¹‹åï¼Œæˆ‘ä»¬è®¤ä¸ºä¸‹é¢å‡ ä¸ªç‰¹æ€§æ˜¯æˆ‘ä»¬ç­›é€‰è°ƒåº¦å™¨çš„æ ‡å‡†ã€‚ï¼ˆä¸‹é¢æˆ‘ä»¬ç»Ÿä¸€å°†æ¡†æ¶ç¼–æ’å¯¹è±¡ç§°ä¸ºWorkflowï¼ŒWorkflowç”±ä¸€ç³»åˆ—Taskç»„æˆï¼‰&lt;/p>
&lt;ol>
&lt;li>å¹¶è¡Œæ€§ï¼šWorkflowä¸­æ²¡æœ‰æ•°æ®ä¾èµ–å…³ç³»çš„ä¸åŒTaskèƒ½å¦æ”¯æŒè‡ªåŠ¨å¹¶è¡Œ&lt;/li>
&lt;li>ä½è€¦åˆï¼šTaskçš„å…·ä½“å®ç°åº”è¯¥å’ŒWorkflowæœ¬èº«è§£è€¦ï¼ˆç”¨äººè¯ï¼šä¸€ç§Taskå¯ä»¥ä½œä¸ºå¤šç§ä¸åŒçš„Workflowçš„èŠ‚ç‚¹ï¼ŒåŒæ—¶Taskçš„å®ç°æ˜¯å¦éœ€è¦åŒ…å«ä¸å…¶ä»–Taskä¾èµ–å…³ç³»çº¦æŸï¼Ÿï¼‰&lt;/li>
&lt;li>æ•°æ®å…±äº«ï¼šç”±äºæˆ‘ä»¬å¸Œæœ›ä¸åŒçš„Taskä¹‹é—´çš„ä¾èµ–å…³ç³»è§£è€¦ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦Workflowç²’åº¦çš„æ•°æ®å…±äº«æœºåˆ¶ç”¨æ¥åœ¨ä¸åŒçš„Taskå…±äº«æ•°æ®ï¼ˆç”¨äºå‚æ•°ä¼ é€’ï¼‰&lt;/li>
&lt;li>æä¾›Pythonæ¥å£&lt;/li>
&lt;/ol>
&lt;h2 id="aiæ¡†æ¶å¤§ä¹±æ–—">AIæ¡†æ¶å¤§ä¹±æ–—&lt;/h2>
&lt;p>æˆ‘ä»¬é¦–å…ˆå°†ç›®å…‰æ”¾åˆ°äº†ç°åœ¨ç‚™æ‰‹å¯çƒ­çš„AI Workflowè°ƒåº¦æ¡†æ¶ã€‚å›´ç»•å‰é¢æåˆ°çš„å‡ ä¸ªç»´åº¦ï¼Œæˆ‘ä»¬åˆ†åˆ«è°ƒç ”äº†ä¸‹é¢å‡ ç§ä¸åŒçš„Workflowç¼–æ’æ¡†æ¶â€”â€”LlamaIndexï¼ŒAgnoï¼ŒPydantic-Aiï¼ŒLangGraphã€‚&lt;/p>
&lt;h3 id="llamaindex">LlamaIndex&lt;/h3>
&lt;p>å¯¹äºLlamaIndexï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå¸¸è§çš„ä¾‹å­è¯´æ˜LlamaIndexè¿™ä¸ªæ¡†æ¶çš„è®¾è®¡ç†å¿µã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">from&lt;/span> &lt;span style="color:#000">workflows&lt;/span> &lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#000">Workflow&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">step&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">from&lt;/span> &lt;span style="color:#000">workflows.events&lt;/span> &lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#000">StartEvent&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">StopEvent&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">Event&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">StepEvent&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Event&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">message&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87">str&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">MyWorkflow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Workflow&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5c35cc;font-weight:bold">@step&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">async&lt;/span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">step_one&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">ev&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">StartEvent&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&amp;gt;&lt;/span> &lt;span style="color:#000">StepEvent&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">current_count&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">await&lt;/span> &lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">store&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">get&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;count&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">default&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">current_count&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">+=&lt;/span> &lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">await&lt;/span> &lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">store&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">set&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;count&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">current_count&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87">print&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;step one called once&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">StepEvent&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;launch step two&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5c35cc;font-weight:bold">@step&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">async&lt;/span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">step_two&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">ctx&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">Context&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">ev&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">StepEvent&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&amp;gt;&lt;/span> &lt;span style="color:#000">StopEvent&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87">print&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;step two called once&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">StopEvent&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾ˆå¤šé—®é¢˜ã€‚é¦–å…ˆæ˜ç¡®ä¸€ä¸ªè§‚å¿µï¼šWorkflowç”±ä¸¤ä¸ªå…ƒç´ æ„æˆï¼šTaskï¼ŒTaskä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚åªè¦è¿™ä¸¤ä¸ªå…ƒç´ ç¡®å®šä¹‹åä¸€ä¸ªWorkflowå°±ç¡®å®šä¸‹æ¥äº†ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°LlamaIndexä¸­æ¯ä¸ªTask(å¯¹åº”ä»£ç ä¸­ç”¨@stepæ³¨è§£çš„å‡½æ•°)çš„å®ç°å’ŒWorkflowå­˜åœ¨ä¾èµ–å…³ç³»ã€‚å› ä¸ºæ¯ä¸ªTaskçš„å®ç°éƒ½éœ€è¦ä¼ å…¥Eventå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œä½†æ˜¯Eventå‚æ•°å…¶å®å°±æ˜¯å¯¹Taskä¹‹é—´ä¾èµ–å…³ç³»çš„ä¸€ç§é™å®šã€‚æ‰€ä»¥LlamaIndexä¸å…·å¤‡ä½è€¦åˆçš„ç‰¹ç‚¹ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿå‘ç°Taskä½œä¸ºWorkflowç±»æˆå‘˜å‡½æ•°æœ¬èº«å°±è¿èƒŒäº†æˆ‘ä»¬å‰é¢æåˆ°çš„Taskéœ€è¦èƒ½å¤Ÿåœ¨å¤šç§ä¸åŒWorkflowä¸­ä½¿ç”¨çš„è¯‰æ±‚ã€‚ä½†æ˜¯ç»è¿‡è°ƒç ”ï¼ŒLlamaIndexçš„æ•°æ®å…±äº«å’Œå¹¶è¡Œç‰¹æ€§æ”¯æŒè¿˜ç®—ä¸é”™ã€‚åªä¸è¿‡ä»åŸºäºäº‹ä»¶é©±åŠ¨æ¨¡å‹æ„å»ºçš„ç¼–ç¨‹æ¥å£åœ¨ä¿è¯äº†æ¥å£æ˜“ç”¨æ€§çš„åŒæ—¶ä¹Ÿç‰ºç‰²äº†ç¼–ç¨‹çš„çµæ´»æ€§ã€‚&lt;/p>
&lt;h3 id="agno">Agno&lt;/h3>
&lt;p>åŒæ ·è¿˜æ˜¯ä»ä¾‹å­å…¥æ‰‹&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">from&lt;/span> &lt;span style="color:#000">agno.workflow&lt;/span> &lt;span style="color:#204a87;font-weight:bold">import&lt;/span> &lt;span style="color:#000">Router&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">Workflow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">route_by_topic&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">step_input&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&amp;gt;&lt;/span> &lt;span style="color:#000">List&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">topic&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">step_input&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">input&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">lower&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;tech&amp;#34;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">in&lt;/span> &lt;span style="color:#000">topic&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Tech Research&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">agent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">tech_expert&lt;/span>&lt;span style="color:#000;font-weight:bold">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">elif&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;business&amp;#34;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">in&lt;/span> &lt;span style="color:#000">topic&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Business Research&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">agent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">biz_expert&lt;/span>&lt;span style="color:#000;font-weight:bold">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">else&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;General Research&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">agent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">generalist&lt;/span>&lt;span style="color:#000;font-weight:bold">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">workflow&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">Workflow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Expert Routing&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">steps&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Router&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Topic Router&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">selector&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">route_by_topic&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">choices&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">tech_step&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">business_step&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">general_step&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Synthesis&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">agent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">synthesizer&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">workflow&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">print_response&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Latest developments in artificial intelligence and machine learning&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">markdown&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#204a87;font-weight:bold">True&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»è¿™ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Workflowæœ¬èº«å’ŒTaskä¹‹é—´çš„ç»‘å®šå…³ç³»æ˜¯é€šè¿‡æŒ‡å®šstepså‚æ•°ç¡®å®šçš„ã€‚ç†è®ºä¸Šæ¥è¯´å®šä¹‰å¥½ä¸€ç§Taskä¹‹åæˆ‘ä»¬å¯ä»¥å°†å…¶ç”¨äºä¸åŒçš„Workflowä¸­ï¼ŒAgnoçš„è®¾è®¡ç¬¦åˆæˆ‘ä»¬çš„ä½è€¦åˆæ ‡å‡†ã€‚&lt;/p>
&lt;p>ä½†æ˜¯æ•°æ®å…±äº«å’Œä»»åŠ¡å¹¶è¡Œæ–¹é¢çš„æ”¯æŒå°±å­˜åœ¨ä¸€å®šçš„é™åˆ¶ã€‚&lt;/p>
&lt;p>é¦–å…ˆæ˜¯ä»»åŠ¡å¹¶è¡Œï¼Œä¾‹å­å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">workflow&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">Workflow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Parallel Research Pipeline&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">steps&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Parallel&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;HackerNews Research&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">agent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">hn_researcher&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Web Research&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">agent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">web_researcher&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Academic Research&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">agent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">academic_researcher&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Research Step&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">),&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">Step&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">name&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Synthesis&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">agent&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#000">synthesizer&lt;/span>&lt;span style="color:#000;font-weight:bold">),&lt;/span> &lt;span style="color:#8f5902;font-style:italic"># Combines the results and produces a report&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Agnoä¸“é—¨è®¾è®¡äº†å¹¶è¡Œæ¥å£ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é™æ€ç¼–è¯‘æ—¶ï¼ˆPythonå“ªæœ‰ç¼–è¯‘æ—¶ï¼Ÿåº”è¯¥å«å†™ä»£ç çš„æ—¶å€™å“ˆå“ˆğŸ˜€ï¼‰æ˜ç¡®å“ªäº›ä»»åŠ¡å¯ä»¥å¹¶è¡Œã€‚ä½†æ˜¯Agentic GraphRAGæœ€ç»ˆæ„é€ çš„Workflowæœ‰å¯èƒ½æ˜¯åœ¨è¿è¡Œæ—¶ç”±æ¨¡å‹è§„åˆ’å‡ºæ¥çš„ï¼Œæ˜¯åŠ¨æ€è¿è¡Œæ—¶æ˜ç¡®çš„ï¼Œå‡ºäºè¿™æ ·çš„è€ƒé‡ï¼Œæˆ‘ä»¬è®¤ä¸ºAgnoçš„å¹¶è¡Œç‰¹æ€§å¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥æ˜¯æ•°æ®å…±äº«ï¼ŒAgnoæ¡†æ¶ä¸­æ”¯æŒä¸‰ç§ä¸åŒçš„Taskï¼š&lt;/p>
&lt;ol>
&lt;li>Agent&lt;/li>
&lt;li>ç”±å¤šä¸ªAgentæ„æˆçš„Team&lt;/li>
&lt;li>Pure Function&lt;/li>
&lt;/ol>
&lt;p>æˆ‘ä»¬æ£€æŸ¥äº†è°ƒç ”æ—¶æœ€æ–°ç‰ˆæœ¬çš„Agnoæºä»£ç ï¼Œå‘ç°Agnoæ”¯æŒçš„çŠ¶æ€å…±äº«ä»…é™äºAgentå’ŒTeamã€‚é‚£ä¹ˆå¯¹äºé‚£äº›é€‚åˆç”¨Pure Functionå®ç°çš„Taskï¼Œæˆ‘ä»¬å°±éœ€è¦é¢å¤–æ”¯æŒæ•°æ®å…±äº«çš„æœºåˆ¶ã€‚å› æ­¤Agnoçš„æ•°æ®å…±äº«æœºåˆ¶ä¹Ÿä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ã€‚&lt;/p>
&lt;h3 id="pydantic-ai">Pydantic-Ai&lt;/h3>
&lt;p>æˆ‘ä»¬ä»å®˜æ–¹æ–‡æ¡£ä¸­å°±çœ‹åˆ°&lt;/p>
&lt;div style="text-align: center;">
&lt;img src="/blog/images/images-server/agentic-pydantic.png" alt="image" width="800">
&lt;/div>
&lt;p>Pydantic-Aiæ¡†æ¶ç«Ÿç„¶ä¸æ”¯æŒTaskç²’åº¦çš„è‡ªåŠ¨å¹¶è¡Œã€‚&lt;/p>
&lt;p>å’ŒLlamaIndexæ¡†æ¶ç±»ä¼¼é‡‡ç”¨äº‹ä»¶é©±åŠ¨çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå› æ­¤Workflowå’ŒTaskä¹‹é—´ä¸ç®—æ˜¯å®Œå…¨è§£è€¦ï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ—¶Pydantic-Aiçš„Taskæ˜¯å¯ä»¥ç”¨åˆ°å¤šä¸ªä¸åŒçš„Workflowçš„ã€‚&lt;/p>
&lt;h3 id="langgraph">LangGraph&lt;/h3>
&lt;p>æœ€åçš„æœ€åï¼Œç»ˆäºè¿˜æ˜¯é‡åˆ°äº†LangGraphï¼Œä¹‹å‰ä¸€ç›´æ²¡æœ‰è°ƒç ”LangGraphçš„åŸå› æ˜¯å› ä¸ºç”±å›¢é˜Ÿä¼™ä¼´è®¤ä¸ºLangGraphæœ¬èº«å¤ªé‡äº†ã€‚åœ¨ä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œå³ä½¿åªæ˜¯ä½¿ç”¨LangGraphçš„éƒ¨åˆ†åŠŸèƒ½ï¼ˆè°ƒåº¦ï¼‰ï¼Œä¹Ÿéœ€è¦å¼•å…¥LangGraphçš„å®Œæ•´ä¾èµ–ï¼Œå¼•å…¥LangGraphå¯èƒ½ä¼šè®©é¡¹ç›®å˜â€œé‡â€ã€‚æ—¶ä¸æ—¶åœ¨å…¶ä»–å¼€æºé¡¹ç›®ä¸­çœ‹åˆ°â€œxxxæ¯”LangGraphå¿«xxxå€â€è¯¸å¦‚æ­¤ç±»çš„å­—çœ¼ä¹Ÿç¡®å®å½±å“åˆ°æˆ‘ä»¬çš„å†³ç­–åˆ¤æ–­ã€‚æ‰€ä»¥ç›´åˆ°æ­¤æ—¶æ­¤åˆ»æ‰æŠŠå®ƒæä¸Šè°ƒç ”æ—¥ç¨‹ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹çœ‹LangGraphçš„ä¾‹å­&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">State&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">TypedDict&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">topic&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87">str&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">joke&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87">str&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">improved_joke&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#204a87">str&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">generate_joke&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">state&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">State&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;First LLM call to generate initial joke&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">msg&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">llm&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">invoke&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">f&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Write a short joke about &lt;/span>&lt;span style="color:#4e9a06">{&lt;/span>&lt;span style="color:#000">state&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;topic&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">msg&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">content&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">check_punchline&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">state&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">State&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;Gate function to check if the joke has a punchline&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#8f5902;font-style:italic"># Simple check - does the joke contain &amp;#34;?&amp;#34; or &amp;#34;!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;?&amp;#34;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">in&lt;/span> &lt;span style="color:#000">state&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span> &lt;span style="color:#204a87;font-weight:bold">or&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;!&amp;#34;&lt;/span> &lt;span style="color:#204a87;font-weight:bold">in&lt;/span> &lt;span style="color:#000">state&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Pass&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Fail&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">improve_joke&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">state&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">State&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;Second LLM call to improve the joke&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">msg&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">llm&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">invoke&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">f&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Make this joke funnier by adding wordplay: &lt;/span>&lt;span style="color:#4e9a06">{&lt;/span>&lt;span style="color:#000">state&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;joke&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;improved_joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">msg&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">content&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Build workflow&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">workflow&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">StateGraph&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">State&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Add nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">workflow&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">add_node&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;generate_joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">generate_joke&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">workflow&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">add_node&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;improve_joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">improve_joke&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Add edges to connect nodes&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">workflow&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">add_edge&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">START&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;generate_joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">workflow&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">add_conditional_edges&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;generate_joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">check_punchline&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Fail&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;improve_joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Pass&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">END&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">workflow&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">add_edge&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;improve_joke&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">END&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Compile&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">chain&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">workflow&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">compile&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># Invoke&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">state&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#000">chain&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">invoke&lt;/span>&lt;span style="color:#000;font-weight:bold">({&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;topic&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;cats&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ˜¯ä¸€ä¸ªæˆ‘ç®€åŒ–åçš„å®˜æ–¹æ–‡æ¡£ä¸­çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŸºäºGraphAPIçš„LangGraphé€šè¿‡è°ƒç”¨workflow.add_edgeæŒ‡å®šWorkflowçš„ä¾èµ–å…³ç³»ï¼Œå°†Workflowå’ŒTaskè§£è€¦ã€‚åŒæ—¶æ”¯æŒå…¨å±€Stateä½œä¸ºWorkflowçš„çŠ¶æ€è¿›è¡ŒTaskä¹‹é—´çš„æ•°æ®å…±äº«ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„è¯´æ³•ï¼ŒLangGraphæ˜¯æ”¯æŒTaskè‡ªåŠ¨å¹¶è¡Œæ‰§è¡Œçš„ã€‚æˆ‘ä»¬æ€»ç®—æ˜¯æ‰¾åˆ°äº†ç¬¦åˆæ‰€æœ‰è¦æ±‚çš„Workflowç¼–æ’æ¡†æ¶äº†ï¼&lt;/p>
&lt;h3 id="æ€»ç»“">æ€»ç»“&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>å¹¶è¡Œæ€§&lt;/th>
&lt;th>ä½è€¦åˆ&lt;/th>
&lt;th>æ•°æ®å…±äº«&lt;/th>
&lt;th>Python Interface&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>LlamaIndex&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;td>ä¸æ”¯æŒ&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Agno&lt;/td>
&lt;td>æ”¯æŒä½†ä¸ç¬¦åˆè¦æ±‚&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;td>æ”¯æŒä½†ä¸ç¬¦åˆè¦æ±‚&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Pydantic-Ai&lt;/td>
&lt;td>ä¸æ”¯æŒ&lt;/td>
&lt;td>ä¸æ”¯æŒ&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>LangGraph&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;td>æ”¯æŒ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="cgraph--graph-with-python-interaface-implement-in-c">CGraph â€”â€” Graph with Python Interaface Implement in C++&lt;/h2>
&lt;p>æ­£å½“æˆ‘ä»¬å°†ç›®å…‰èšç„¦äº LangGraph æ—¶ï¼Œå›¢é˜Ÿä¼™ä¼´æåˆ°äº†ä¸€ä¸ªæ–°çš„æ–¹æ¡ˆâ€”â€”CGraphï¼Œè¿™æ˜¯ç”±å¼€æºåˆ›ä½œè€…Chunelä½¿ç”¨C++å¼€å‘çš„å›¾è°ƒåº¦æ¡†æ¶ï¼Œå¯¹æ ‡SOTAä»»åŠ¡è°ƒåº¦æ¡†æ¶â€”â€”taskflowã€‚CGraphï¼Œå­¦åColor Graphï¼Œè™½ç„¶æ˜¯C++é¡¹ç›®ï¼Œä½†æ˜¯å®ƒå¾ˆè´´å¿ƒåœ°æä¾›äº†Pythonæ¥å£ã€‚æ·±å…¥äº†è§£åï¼Œæˆ‘ä»¬å‘ç° CGraph çš„è®¾è®¡ç†å¿µä¸æˆ‘ä»¬ä¸è°‹è€Œåˆï¼šå’ŒLangGraphä¸€æ ·ï¼ŒCGraphåŸºäºå›¾çš„å£°æ˜å¼ APIï¼Œå®Œç¾æ”¯æŒæˆ‘ä»¬æ‰€éœ€çš„å¹¶è¡ŒåŒ–ã€ä½è€¦åˆå’Œæ•°æ®å…±äº«éœ€æ±‚ã€‚&lt;/p>
&lt;p>å¦‚æœè¯´â€œC++ ç«™åœ¨ç¼–ç¨‹è¯­è¨€é„™è§†é“¾é¡¶ç«¯â€æ˜¯ä¸ªæœ‰è¶£çš„ç©ç¬‘ï¼Œé‚£å®ƒèƒŒååæ˜ çš„å…¶å®æ˜¯ç¨‹åºå‘˜å¯¹åº•å±‚æ€§èƒ½çš„æè‡´è¿½æ±‚ã€‚é™¤å»è¿™ä¸ªâ€œå…ˆå¤©â€ä¼˜åŠ¿ï¼Œ CGraph ç›¸æ¯” LangGraph æœ€å¤§çš„ä¸åŒï¼Œåœ¨äºå®ƒçš„&lt;strong>çº¯ç²¹&lt;/strong>â€”â€”å®ƒä¸æ„å»ºåºå¤§çš„ç”Ÿæ€ï¼Œåªä¸“æ³¨äºå°†â€œä»»åŠ¡è°ƒåº¦â€è¿™ä¸€ä»¶äº‹åšåˆ°æè‡´ã€‚&lt;/p>
&lt;p>ç„¶è€Œï¼ŒçœŸæ­£è®©æˆ‘ä»¬ä¸‹å®šå†³å¿ƒçš„ï¼Œæ˜¯è¿™ä¸ªé¡¹ç›®çš„â€œå¿ƒè·³â€ã€‚æˆ‘ä»¬è”ç³»ä¸Šäº†ä½œè€… Chunelï¼Œæ„Ÿå—åˆ°äº† CGraph ä½œä¸ºä¸€ä¸ªé¡¹ç›®æ—ºç››çš„ç”Ÿå‘½åŠ›ã€‚åœ¨å¼€æºä¸–ç•Œé‡Œï¼Œ&lt;strong>æ´»åŠ›å³æœªæ¥&lt;/strong>ã€‚ä¸€ä¸ªæŒç»­è¿›åŒ–ã€ç§¯æå“åº”çš„ç¤¾åŒºï¼Œè¿œæ¯”ä¸€ä¸ªåŠŸèƒ½å†»ç»“çš„åºç„¶å¤§ç‰©æ›´å€¼å¾—ä¿¡èµ–ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ç›¸ä¿¡ï¼Œä¼˜ç§€çš„æŠ€æœ¯é€‰å‹ï¼Œä¸ä»…æ˜¯åŠŸèƒ½çš„åŒ¹é…ï¼Œæ›´æ˜¯å¯¹é¡¹ç›®æœªæ¥æ½œåŠ›çš„è®¤åŒã€‚ï¼ˆæ¬¢è¿ä¸€åŒè§è¯å®ƒçš„æˆé•¿ï¼šhttps://github.com/ChunelFeng/CGraphï¼‰&lt;/p>
&lt;div style="text-align: center;">
&lt;img src="/blog/images/images-server/agentic-frame.png" alt="image" width="800">
&lt;/div>
&lt;h2 id="æ¶æ„è®¾è®¡">æ¶æ„è®¾è®¡&lt;/h2>
&lt;p>èµ·åˆï¼Œæˆ‘ä»¬çš„ç›®æ ‡å¾ˆçº¯ç²¹ï¼šåŸºäºCGraphï¼Œæ‰“é€ ä¸€ä¸ªå±äºæˆ‘ä»¬è‡ªå·±çš„è°ƒåº¦å™¨ã€‚ç„¶è€Œæ·±å…¥æ€è€ƒä¹‹åï¼Œæˆ‘ä»¬å‘ç°ï¼šä¸€ä¸ªå¥½çš„è°ƒåº¦å™¨ï¼Œ&lt;strong>æºäºå¯¹è°ƒåº¦å¯¹è±¡çš„æ·±åˆ»ç†è§£&lt;/strong>ï¼ˆæ˜¯æ—¶å€™æ‹·é—®è‡ªå·±äº†ğŸ¤£ï¼‰ã€‚å°±åƒCPUè°ƒåº¦å™¨å’ŒGPUè°ƒåº¦å™¨ç”±äºå…¶è°ƒåº¦å¯¹è±¡ä»¥åŠç”Ÿæ€å®šä½çš„ä¸åŒä¹Ÿä¼šé‡‡å–ä¸åŒè°ƒåº¦ç­–ç•¥ã€‚&lt;/p>
&lt;h3 id="æŠ½è±¡è®¾è®¡æ˜¯å¦åˆç†">æŠ½è±¡è®¾è®¡æ˜¯å¦åˆç†ï¼Ÿ&lt;/h3>
&lt;p>æ‰€ä»¥æˆ‘ä»¬å¼€å§‹è€ƒå¯Ÿé‚£ä¸ªè¢«æˆ‘ä»¬ç§°ä¹‹ä¸ºWorkflowçš„æŠ½è±¡ï¼Œåœ¨ä¸Šä¸€ä¸ªè®¾è®¡ä¸­ï¼Œå®ƒæ˜¯ç”±ä¸€ç³»åˆ—Operatorç»„æˆçš„é“¾è¡¨ã€‚è¿™æ ·çš„è®¾è®¡å¦å®šäº†å¹¶è¡Œçš„å¯èƒ½ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬è¯´Workflowæ˜¯ä¸€ç³»åˆ—Operatorç»„æˆçš„DAGå›¾æ˜¯å¦åˆç†å‘¢ï¼Ÿ&lt;/p>
&lt;p>ç›´è§‚æ¥è¯´è¿™æ ·çš„å®šä¹‰å¾ˆåˆç†ï¼Œä½†æ˜¯å®é™…å®è·µä¸‹æ¥ï¼Œæˆ‘ä»¬å‘ç°Workflowä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ˆåé¢æˆ‘ä»¬ç§°ä¹‹ä¸ºNodeï¼‰å’ŒOperatorä¸€ä¸€å¯¹åº”å´ä¸æ˜¯ä¸€ä¸ªå¥½çš„è®¾è®¡ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„è¯·æ±‚ä¹‹é—´å¤ç”¨Workflowï¼ˆè¿™æ ·å¯ä»¥èŠ‚çœWorkflowæ„é€ è¿‡ç¨‹ä¸­ä¸å¯é¿å…çš„èµ„æºåˆ›å»ºä»¥åŠä¸€äº›DAGå›¾æ ¡éªŒå¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼‰ã€‚&lt;/p>
&lt;p>ä¸¾ä¸ªä¾‹å­ï¼Œå‘é‡ç›¸ä¼¼åº¦æŸ¥è¯¢æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„RAGæµç¨‹ï¼Œä½†æ˜¯æ ¹æ®ä¸åŒåº•å±‚å‘é‡æ•°æ®åº“æš´éœ²çš„æ¥å£ä¸åŒï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æä¾›FaissVectorSearchã€VectraVectorSearchç­‰å¤šç§ç›®çš„ç›¸åŒä½†æ˜¯å…·ä½“å®ç°ä¸åŒçš„Operatorã€‚å¦‚æœæˆ‘ä»¬å°†Operatorå’ŒWorkflowä¸­çš„Nodeç­‰åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯¹äºWorkflowçš„å¤ç”¨æœºä¼šå°†å¤§å¤§å‡å°‘ï¼Œå› ä¸ºä½¿ç”¨Faissè¿›è¡Œæœç´¢å’Œä½¿ç”¨Vectraè¿›è¡Œæœç´¢çš„Workflowå°†ä¼šæ˜¯ä¸åŒçš„Workflowï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å°†åŠŸèƒ½ç±»ä¼¼çš„å‘é‡ç´¢å¼•Operatoréƒ½å°è£…åˆ°VectorSearchNodeä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½å¤Ÿæœ‰æ›´å¤šçš„Workflowå¤ç”¨æœºä¼šå‘¢ï¼Ÿåœ¨VectorSearchNodeçš„å…·ä½“å®ç°ä¸­æˆ‘ä»¬åªéœ€è¦æ ¹æ®éœ€è¦è°ƒç”¨å¯¹åº”çš„Operatorå³å¯ã€‚é€šè¿‡åœ¨Workflowå’ŒOperatorä¸­é—´åŠ ä¸€å±‚çš„æ–¹å¼ï¼Œæœ‰ä¸‹é¢ä¸‰ä¸ªå¥½å¤„ï¼š&lt;/p>
&lt;ol>
&lt;li>æ–°å¢æ–°çš„Operatorï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹å¯¹åº”Nodeçš„å…·ä½“å®ç°å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹ä¸Šå±‚Workflowçš„é€»è¾‘ã€‚Operatorå¯¹Nodeè´Ÿè´£ï¼ŒNodeå¯¹Workflowè´Ÿè´£ï¼Œå¾ˆå¥½åœ°å®ç°äº†èŒèƒ½åˆ†ç¦»ã€‚&lt;/li>
&lt;li>æ‹¥æœ‰æ›´å¤šçš„Workflowå¤ç”¨çš„æœºä¼šã€‚&lt;/li>
&lt;li>é€šè¿‡å¼•å…¥æ–°çš„NodeæŠ½è±¡ï¼Œæˆ‘ä»¬åœ¨é‡æ„çš„è¿‡ç¨‹ä¸­ä¸éœ€è¦ä¿®æ”¹åº•å±‚Operatorçš„å®ç°ï¼Œå‡è½»äº†é‡æ„è¿‡ç¨‹ä¸­çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚&lt;/li>
&lt;/ol>
&lt;div style="text-align: center;">
&lt;img src="/blog/images/images-server/agentic-abstract.png" alt="image" width="800">
&lt;/div>
&lt;p>æ—¢ç„¶æˆ‘ä»¬å¸Œæœ›è·¨è¯·æ±‚å¤ç”¨åŒç±»Workflowï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä¿è¯Workflowæœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œå› ä¸ºå¦‚æœå¤ç”¨çš„Workflowè¿˜å¸¦ç€ä¸Šä¸€ä¸ªè¯·æ±‚çš„çŠ¶æ€ï¼Œç”¨æˆ·å°±å¯èƒ½å¾—åˆ°å‘ç”Ÿæ„æ–™ä¹‹å¤–çš„ç»“æœã€‚è€ŒWorkflowçš„çŠ¶æ€å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š&lt;/p>
&lt;ol>
&lt;li>ç”¨æˆ·è¾“å…¥çš„çŠ¶æ€ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºWorkflowInputï¼‰ï¼šè¿™éƒ¨åˆ†ç”±ç”¨æˆ·çš„è¯·æ±‚æ„æˆ&lt;/li>
&lt;li>Workflowçš„ä¸­é—´çŠ¶æ€ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºWorkflowStateï¼‰ï¼šç”±Workflowä¸­å„èŠ‚ç‚¹ï¼ˆNodeï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸´æ—¶æ•°æ®ã€è®¡ç®—ç»“æœç­‰ã€‚&lt;/li>
&lt;/ol>
&lt;p>æˆ‘ä»¬éœ€è¦ä¿è¯Workflowæ‰§è¡Œçš„è¿‡ç¨‹ä¸­è¿™ä¸¤éƒ¨åˆ†çŠ¶æ€æ˜¯å¹²å‡€çš„ã€‚ä½†æ˜¯è¿™ä¸¤ç§ä¸åŒçš„çŠ¶æ€ä½¿ç”¨æ—¶æœºåˆä¸åŒï¼Œè¿™ä¹Ÿå°±å†³å®šäº†ä»–ä»¬æˆªç„¶ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼š&lt;/p>
&lt;ul>
&lt;li>WorkflowInputåœ¨Workflowæ‰§è¡Œ&lt;strong>å‰&lt;/strong>è¢«æ„å»ºå’Œæ³¨å…¥ï¼Œåœ¨Workflowæ‰§è¡Œ&lt;strong>ç»“æŸå&lt;/strong>å…¶ä½¿å‘½ä¾¿å·²å®Œæˆï¼Œåº”è¢«é”€æ¯ã€‚&lt;/li>
&lt;li>WorkflowStateåœ¨Workflowæ‰§è¡Œ&lt;strong>å‰&lt;/strong>å¿…é¡»ä¸ºç©ºæˆ–å¤„äºåˆå§‹çŠ¶æ€ï¼ˆpristineï¼‰ï¼Œåœ¨æ‰§è¡Œ&lt;strong>è¿‡ç¨‹&lt;/strong>ä¸­è¢«åŠ¨æ€è¯»å†™ã€‚&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬åˆ©ç”¨ CGraph æ¡†æ¶æä¾›çš„ &lt;code>GParam&lt;/code>ï¼ˆå…¨å±€å‚æ•°ï¼‰æŠ½è±¡æ¥å®ç°ç²¾ç»†åŒ–çš„çŠ¶æ€éš”ç¦»ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>åˆ†ç¦»ä¸Šä¸‹æ–‡&lt;/strong>: æˆ‘ä»¬ä¸ºWorkflowInputå’ŒWorkflowStateå®šä¹‰ä¸¤ä¸ªç‹¬ç«‹çš„Â &lt;code>GParam&lt;/code>Â ä¸Šä¸‹æ–‡ã€‚&lt;/li>
&lt;li>&lt;strong>æ³¨å…¥ç”Ÿå‘½å‘¨æœŸé’©å­&lt;/strong>: æˆ‘ä»¬åœ¨å·¥ä½œæµçš„æ‰§è¡Œé€»è¾‘å¤–å±‚è¿›è¡Œå°è£…ï¼Œå®ç°ä»¥ä¸‹è‡ªåŠ¨åŒ–æ¸…ç†æœºåˆ¶ï¼š
&lt;ul>
&lt;li>&lt;strong>æ‰§è¡Œå‰ (Pre-execution Hook)&lt;/strong>: è‡ªåŠ¨é‡ç½®ï¼ˆresetï¼‰WorkflowStateä¸Šä¸‹æ–‡ï¼Œç¡®ä¿æ¯æ¬¡æ‰§è¡Œéƒ½åœ¨ä¸€ä¸ªâ€œå¹²å‡€çš„ç”»å¸ƒâ€ä¸Šå¼€å§‹ã€‚&lt;/li>
&lt;li>&lt;strong>æ‰§è¡Œå (Post-execution Hook)&lt;/strong>: è‡ªåŠ¨æ¸…ç†ï¼ˆclearï¼‰WorkflowInputä¸Šä¸‹æ–‡ï¼Œé˜²æ­¢å…¶æ•°æ®æ³„éœ²åˆ°ä¸‹ä¸€æ¬¡è°ƒç”¨ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>è¿™æ ·æˆ‘ä»¬å¯ä»¥ä¿è¯æ¯æ¬¡Workflowæ‰§è¡Œæ—¶è¿™ä¸¤ç§çŠ¶æ€ä¸­éƒ½åªåŒ…å«æœ¬æ¬¡è¯·æ±‚çš„çŠ¶æ€ã€‚ç”±äºWorkflowInputçŠ¶æ€åœ¨Workflowæ‰§è¡Œç»“æŸå°±è¢«é‡ç½®äº†ï¼Œæˆ‘ä»¬åªèƒ½ä»WorkflowStateä¸­æœ‰é€‰æ‹©æ€§åœ°é€‰æ‹©éƒ¨åˆ†æ•°æ®è¿”å›ç»™ç”¨æˆ·ã€‚å› æ­¤æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªFlowæŠ½è±¡åº”è¯¥å®ç°çš„æ¥å£ã€‚&lt;/p>
&lt;div style="text-align: center;">
&lt;img src="/blog/images/images-server/agentic-lifeline.svg" alt="image" width="1000">
&lt;/div>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">BaseFlow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">ABC&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> Base class for flows, defines three interface methods: prepare, build_flow, and post_deal.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5c35cc;font-weight:bold">@abstractmethod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">prepare&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">prepared_input&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">WkFlowInput&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">**&lt;/span>&lt;span style="color:#000">kwargs&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> æ ¹æ®ç”¨æˆ·è¯·æ±‚åˆå§‹åŒ–Workflowè¾“å…¥çŠ¶æ€ï¼ˆWkFlowInputï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5c35cc;font-weight:bold">@abstractmethod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">build_flow&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">**&lt;/span>&lt;span style="color:#000">kwargs&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&amp;gt;&lt;/span> &lt;span style="color:#000">GPipeline&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> ç”¨æ¥æ„å»ºå¯ä»¥è¿è¡Œåœ¨CGraphä¹‹ä¸Šçš„Workflowå¯¹è±¡
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#5c35cc;font-weight:bold">@abstractmethod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">post_deal&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">**&lt;/span>&lt;span style="color:#000">kwargs&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> ä»ä¸­é—´çŠ¶æ€ï¼ˆWkFlowStateï¼‰ä¸­ç»„è£…è¿”å›ç»™ç”¨æˆ·çš„Response
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é‚£ä¹ˆå›åˆ°NodeæŠ½è±¡æœ¬èº«ï¼ŒNodeæœ¬èº«æ˜¯å¯¹æŸä¸ªåŠŸèƒ½çš„æŠ½è±¡ï¼Œå…¶åº•å±‚å¯èƒ½å¯¹åº”ç€å¤šç§ä¸åŒçš„æŠ½è±¡ã€‚æˆ‘ä»¬å¤§è‡´éœ€è¦è€ƒè™‘ä¸‹é¢å‡ ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;ol>
&lt;li>å¦‚ä½•å°†Nodeå±‚å’ŒOperatorå±‚å°½å¯èƒ½è§£è€¦&lt;/li>
&lt;li>Nodeæœ¬èº«æ˜¯å¯ä»¥å¹¶è¡Œçš„ï¼Œè€ŒWorkflowå†…éƒ¨å­˜åœ¨å…±äº«æ•°æ®ï¼Œé‚£ä¹ˆå¦‚ä½•è§£å†³å¯èƒ½å­˜åœ¨çš„å¹¶å‘é—®é¢˜&lt;/li>
&lt;/ol>
&lt;p>æˆ‘ä»¬çŸ¥é“Operatorçš„runæ–¹æ³•è¾“å…¥è¾“å‡ºéƒ½æ˜¯å­—å…¸ï¼ˆè§ä¸Šé¢ç°æœ‰Workflowæ¶æ„çš„ä»‹ç»ï¼‰ï¼Œä¸ºäº†ä½¿å¾—Nodeå±‚å’ŒOperatorå±‚å°½å¯èƒ½åœ°è§£è€¦ï¼Œæˆ‘ä»¬å¸Œæœ›Nodeå±‚ä¹ŸæŒ‰ç…§ç›¸åŒçš„æ–¹å¼è°ƒç”¨Operatorï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸ºWorkflowStateå®ç°ä¸€ä¸ªjsonåºåˆ—åŒ–æ–¹æ³•ï¼Œåœ¨è°ƒç”¨Operatorå‰å°†å½“å‰Workflowä¸­é—´çŠ¶æ€è½¬åŒ–ä¸ºå­—å…¸æ ¼å¼ç„¶åäº¤ç»™Operatorï¼Œç„¶åå°†Operatoræ‰§è¡Œç»“æœé‡æ–°ååºåˆ—åŒ–ä¸ºWorkflowStateã€‚ä¸ºäº†è§£å†³å¹¶å‘è®¿é—®å¸¦æ¥çš„æ•°æ®ç«äº‰é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨MVCCçš„å¹¶å‘æ§åˆ¶æ–¹æ³•ï¼Œä¿è¯Operatoræ“ä½œçš„æ˜¯å¤šä¸ªä¸åŒçš„å‰¯æœ¬ï¼Œå¾—åˆ°Operatorçš„è¿”å›ç»“æœä¹‹åï¼Œåœ¨æœ‰å¹¶å‘å®‰å…¨çš„é”ä¿æŠ¤çš„æƒ…å†µä¸‹å°†è¿”å›çš„ç»“æœåŒæ­¥åˆ°WorkflowStateä¸­ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°Nodeçš„æŠ½è±¡å¤§è‡´å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-python" data-lang="python">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span> &lt;span style="color:#000">BaseNode&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">GNode&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ce5c00;font-weight:bold">//&lt;/span> &lt;span style="color:#000">Workflowä¸­é—´çŠ¶æ€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">context&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">Optional&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">WkFlowState&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ce5c00;font-weight:bold">//&lt;/span> &lt;span style="color:#000">Workflowè¾“å…¥çŠ¶æ€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">wk_input&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000">Optional&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">WkFlowInput&lt;/span>&lt;span style="color:#000;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#204a87;font-weight:bold">None&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">init&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ce5c00;font-weight:bold">//&lt;/span> &lt;span style="color:#000">ä»Pipelineä¸­è·å–å¯¹åº”çŠ¶æ€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">init_context&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">node_init&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> é‡å†™è¿™ä¸ªæ–¹æ³•å®šåˆ¶åŒ–Nodeåˆå§‹åŒ–é€»è¾‘
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">CStatus&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">run&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> Main logic for node execution, can be overridden by subclasses.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> Returns a CStatus object indicating whether execution succeeded.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">sts&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">node_init&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000">sts&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">isErr&lt;/span>&lt;span style="color:#000;font-weight:bold">():&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">sts&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">context&lt;/span> &lt;span style="color:#204a87;font-weight:bold">is&lt;/span> &lt;span style="color:#204a87;font-weight:bold">None&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">CStatus&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;Context not initialized&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">lock&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">try&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">data_json&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">to_json&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">finally&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">unlock&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">res&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">operator_schedule&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">data_json&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">lock&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">try&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">if&lt;/span> &lt;span style="color:#000">res&lt;/span> &lt;span style="color:#204a87;font-weight:bold">is&lt;/span> &lt;span style="color:#204a87;font-weight:bold">not&lt;/span> &lt;span style="color:#204a87;font-weight:bold">None&lt;/span> &lt;span style="color:#204a87;font-weight:bold">and&lt;/span> &lt;span style="color:#204a87">isinstance&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">res&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87">dict&lt;/span>&lt;span style="color:#000;font-weight:bold">):&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">assign_from_json&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">res&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">elif&lt;/span> &lt;span style="color:#000">res&lt;/span> &lt;span style="color:#204a87;font-weight:bold">is&lt;/span> &lt;span style="color:#204a87;font-weight:bold">not&lt;/span> &lt;span style="color:#204a87;font-weight:bold">None&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">log&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">warning&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;operator_schedule returned non-dict type: &lt;/span>&lt;span style="color:#4e9a06">%s&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#204a87">type&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#000">res&lt;/span>&lt;span style="color:#000;font-weight:bold">))&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">finally&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">context&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#000">unlock&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">return&lt;/span> &lt;span style="color:#000">CStatus&lt;/span>&lt;span style="color:#000;font-weight:bold">()&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">def&lt;/span> &lt;span style="color:#000">operator_schedule&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#3465a4">self&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000">data_json&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&amp;gt;&lt;/span> &lt;span style="color:#000">Optional&lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#000">Dict&lt;/span>&lt;span style="color:#000;font-weight:bold">]:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> æ ¹æ®ç”¨æˆ·è¯·æ±‚æˆ–è€…WorkflowçŠ¶æ€å†³å®šè°ƒç”¨å“ªäº›Operator
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#4e9a06"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">raise&lt;/span> &lt;span style="color:#c00;font-weight:bold">NotImplementedError&lt;/span>&lt;span style="color:#000;font-weight:bold">(&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;Subclasses must implement operator_schedule&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†è°ƒåº¦å¯¹è±¡Workflowçš„æŠ½è±¡è®¾è®¡ã€‚&lt;/p>
&lt;h3 id="è°ƒåº¦å™¨è®¾è®¡">è°ƒåº¦å™¨è®¾è®¡&lt;/h3>
&lt;p>åœ¨æ–°çš„è°ƒåº¦å™¨ä½“ç³»ä¸­ï¼ŒWorkflow å¯¹è±¡çš„å®ä¾‹åŒ–ä¸é”€æ¯æ˜¯ä¸€é¡¹ä¸å¯å¿½è§†çš„èµ„æºå¼€é”€ã€‚ä¸ºäº†æœ€å¤§é™åº¦åœ°é™ä½å»¶è¿Ÿã€å‡å°‘å†…å­˜æŠ–åŠ¨ï¼Œæˆ‘ä»¬å¼•å…¥äº† Workflow Pool æœºåˆ¶ï¼Œæ—¨åœ¨å®ç° Workflow å®ä¾‹çš„é«˜æ•ˆå¤ç”¨ã€‚
æˆ‘ä»¬å……åˆ†åˆ©ç”¨äº† CGraph æ¡†æ¶åº•å±‚æä¾›çš„ Pool æŠ½è±¡ï¼Œå¹¶å°†å…¶åº”ç”¨äº Workflow çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚å…¶æ ¸å¿ƒæœºåˆ¶å¦‚ä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;strong>åˆ†ç±»æ± åŒ–&lt;/strong>: ç³»ç»Ÿä¸º&lt;strong>æ¯ç§ç±»å‹&lt;/strong>çš„ Workflow ç»´æŠ¤ä¸€ä¸ªä¸“å±çš„ã€ç‹¬ç«‹çš„ Workflow Poolã€‚è¿™ç¡®ä¿äº†è¯·æ±‚åªä¼šè¢«åˆ†å‘ç»™ç»“æ„å®Œå…¨ç›¸åŒçš„ Workflow å®ä¾‹ã€‚&lt;/li>
&lt;li>&lt;strong>æŒ‰éœ€è·å–ä¸åŠ¨æ€æ‰©å®¹&lt;/strong>: å½“ä¸€ä¸ªæ–°è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œè°ƒåº¦å™¨çš„æ‰§è¡Œé€»è¾‘éµå¾ªä»¥ä¸‹ç­–ç•¥ï¼š
&lt;ol>
&lt;li>&lt;strong>æŸ¥è¯¢ï¼ˆPool Hitï¼‰&lt;/strong>: é¦–å…ˆï¼Œè°ƒåº¦å™¨ä¼šå°è¯•ä»å¯¹åº”ç±»å‹çš„Â Workflow PoolÂ ä¸­è·å–ä¸€ä¸ªç©ºé—²çš„Â WorkflowÂ å®ä¾‹ã€‚å¦‚æœæˆåŠŸï¼Œåˆ™ç«‹å³ä½¿ç”¨è¯¥å®ä¾‹å¤„ç†è¯·æ±‚ï¼Œå®ç°äº†é›¶å¼€é”€å¤ç”¨ã€‚&lt;/li>
&lt;li>&lt;strong>åˆ›å»ºï¼ˆPool Missï¼‰&lt;/strong>: å¦‚æœæ± ä¸­æ— å¯ç”¨å®ä¾‹ï¼Œè°ƒåº¦å™¨å°†åŠ¨æ€åˆ›å»ºä¸€ä¸ªæ–°çš„Â Workflowã€‚è¿™ä¸ªæ–°å®ä¾‹ä¼šç«‹å³ç”¨äºæœåŠ¡å½“å‰è¯·æ±‚ã€‚è¿™ç§ç­–ç•¥ä¿è¯äº†ç³»ç»Ÿåœ¨é«˜è´Ÿè½½ä¸‹ä¾ç„¶å…·å¤‡è‰¯å¥½çš„å¼¹æ€§ã€‚&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>&lt;strong>è‡ªåŠ¨å½’è¿˜&lt;/strong>: æ— è®ºæ˜¯ä»æ± ä¸­è·å–çš„å®ä¾‹è¿˜æ˜¯æ–°åˆ›å»ºçš„å®ä¾‹ï¼Œåœ¨å®Œæˆè¯·æ±‚å¤„ç†åï¼Œéƒ½å°†è¢«&lt;strong>è‡ªåŠ¨å½’è¿˜&lt;/strong>åˆ°å…¶æ‰€å±çš„ Workflow Pool ä¸­ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒåº¦ã€‚&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>ğŸ¤” å½“å‰ç‰ˆæœ¬çš„ Scheduler å®ç°äº†å…¶æœ€æ ¸å¿ƒçš„èŒè´£ï¼Œä¸ºæ•´ä¸ªç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç¨³å®šä¸”é«˜æ•ˆçš„è°ƒåº¦åŸºåº§ã€‚å…¶ä¸»è¦ç‰¹æ€§åŒ…æ‹¬ï¼š
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1. èƒ½å¤Ÿæ ¹æ®è¯·æ±‚ç±»å‹ï¼Œå‡†ç¡®åœ°è°ƒåº¦å¯¹åº”çš„Â WorkflowÂ å®ä¾‹è¿›è¡Œå¤„ç†ã€‚
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 2. å†…ç½®äº†åŸºäºÂ WorkflowÂ ç±»å‹çš„æ± åŒ–ï¼ˆPoolingï¼‰æœºåˆ¶ï¼Œé€šè¿‡å¤ç”¨å·²æœ‰å®ä¾‹ï¼Œæ˜¾è‘—é™ä½äº†é«˜å¹¶å‘åœºæ™¯ä¸‹çš„å¯¹è±¡åˆ›å»ºä¸é”€æ¯å¼€é”€ã€‚
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ä½†æ˜¯åœ¨æœªæ¥ï¼ŒSchedulerå€¼å¾—ä¼˜åŒ–çš„åœ°æ–¹è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ï¼š
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1. å·¥ä½œè´Ÿè½½æ„ŸçŸ¥çš„èµ„æºéš”ç¦»ï¼šå¹¶éæ‰€æœ‰Â WorkflowÂ çš„èµ„æºæ¶ˆè€—éƒ½æ˜¯å‡ç­‰çš„ã€‚æˆ‘ä»¬å°†åˆ©ç”¨ CGraph æä¾›çš„çº¿ç¨‹æ± ç»‘å®šåŠŸèƒ½ï¼Œä¸ºä¸åŒç±»å‹çš„Â Workflow PoolÂ åˆ†é…ä¸“å±çš„è®¡ç®—èµ„æºã€‚
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 2. ç”Ÿäº§çº§å®¹é‡ç®¡ç†ä¸ç¨³å®šæ€§ï¼šä¸ºæ¯ä¸ªÂ Workflow PoolÂ å¼•å…¥å¯é…ç½®çš„å®¹é‡ä¸Šé™ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ— é™åˆ¶çš„èµ„æºæ± æ˜¯æ½œåœ¨çš„é£é™©ç‚¹ã€‚é€šè¿‡è®¾ç½®æ± å¤§å°çš„ä¸Šé™ï¼Œæˆ‘ä»¬å¯ä»¥é˜²æ­¢ç³»ç»Ÿåœ¨æç«¯è´Ÿè½½ä¸‹è€—å°½å†…å­˜ï¼Œç¡®ä¿æœåŠ¡çš„ç¨³å®šæ€§ã€‚
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¾—åˆ°æ•´ä¸ªé¡¹ç›®çš„æ•´ä½“æ¶æ„å›¾&lt;/p>
&lt;div style="text-align: center;">
&lt;img src="/blog/images/images-server/agentic-scheduler.png" alt="image" width="600">
&lt;/div>
&lt;ol>
&lt;li>Scheduleræ”¶åˆ°è¯·æ±‚åï¼Œé¦–å…ˆå‘PipelinePoolæŸ¥è¯¢æ˜¯å¦å­˜åœ¨å¯¹åº”ç±»å‹çš„ç©ºé—²Pipeline
&lt;ol>
&lt;li>å½“ç”¨æˆ·è¯·æ±‚åˆ°æ¥æ—¶ï¼ŒHttp Routeræ ¹æ®è¯·æ±‚çš„ç±»å‹å°†ä»»åŠ¡å§”æ‰˜ç»™æ ¸å¿ƒçš„Schedulerï¼Œè¯·æ±‚ä¸€ä¸ªèƒ½å¤Ÿå¤„ç†è¯¥ç±»å‹ä»»åŠ¡çš„Pipelineå®ä¾‹ã€‚&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>è‹¥PipelinePoolä¸­å­˜åœ¨ç©ºé—²Pipelineï¼Œåˆ™Schedulerç›´æ¥è¿”å›è¯¥Pipeline&lt;/li>
&lt;li>è‹¥PipelinePoolä¸­ä¸å­˜åœ¨ç©ºé—²Pipelineï¼Œåˆ™è°ƒç”¨å¯¹åº”ç±»å‹çš„WorkflowBuilderæ„å»ºè¯¥ç±»å‹çš„Pipelineå¹¶è¿”å›&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>æ— è®ºPipelineæ˜¯ä»æ± ä¸­è·å–çš„è¿˜æ˜¯æ–°åˆ›å»ºçš„ï¼Œå®ƒéƒ½ä¼šç«‹å³æ‰§è¡Œè¯·æ±‚å¤„ç†ï¼Œå¹¶å°†Responseè¿”å›ç»™ç”¨æˆ·ã€‚å¤„ç†å®Œæˆåï¼Œè¯¥Pipelineå®ä¾‹å¹¶&lt;strong>ä¸ä¼šè¢«é”€æ¯&lt;/strong>ã€‚ç›¸åï¼Œå®ƒä¼šè¢«&lt;strong>è‡ªåŠ¨é‡Šæ”¾&lt;/strong>å¹¶å½’è¿˜åˆ°PipelinePoolä¸­ï¼ŒçŠ¶æ€é‡ç½®åç­‰å¾…ä¸‹ä¸€æ¬¡è¢«è°ƒåº¦ã€‚&lt;/li>
&lt;/ol>
&lt;h3 id="agentic-graphrag-ç†æƒ³ä¸ç°å®çš„ç¢°æ’">Agentic GraphRAG: ç†æƒ³ä¸ç°å®çš„ç¢°æ’&lt;/h3>
&lt;p>é¡¹ç›®ä¹‹åˆï¼Œæˆ‘ä»¬ç•…æƒ³ä¸€ä¸ªå®Œå…¨â€œAgenticâ€çš„ GraphRAGã€‚ä½ åªéœ€å‘Šè¯‰å®ƒä½ çš„é—®é¢˜ï¼Œä¸€ä¸ªå¼ºå¤§çš„ LLM å°±èƒ½åƒä¸€ä½èµ„æ·±æ¶æ„å¸ˆï¼Œä»ä¸€å †å·¥å…·ï¼ˆNodes/Operatorsï¼‰ä¸­ä¸ºä½ é‡èº«å®šåˆ¶ä¸€å¥—æœ€é«˜æ•ˆçš„æ‰§è¡Œæµç¨‹ï¼ˆWorkflowï¼‰ã€‚
ä½†ç†æƒ³ä¸ç°å®ä¹‹é—´æ€»æœ‰è·ç¦»ã€‚æˆ‘ä»¬æ·±å…¥è°ƒç ”äº† chat2graph ç­‰ç±»ä¼¼é¡¹ç›®ï¼Œå¹¶å®é™…åŠ¨æ‰‹æ£€éªŒæ•ˆæœã€‚ç»“æœå‘ç°ï¼Œè®© LLM å‡­ç©ºâ€œåˆ›é€ â€ä¸€ä¸ªå®Œç¾çš„ã€æ— æ‡ˆå¯å‡»çš„æ‰§è¡Œè®¡åˆ’ï¼Œæ¯”æˆ‘ä»¬æƒ³è±¡çš„è¦éš¾å¾—å¤šã€‚å³ä½¿æ˜¯ä½¿ç”¨ Gemini 2.5 Flash è¿™æ ·çš„æ¨¡å‹ï¼Œå®ƒåœ¨ç†è§£å¤æ‚æŒ‡ä»¤å¹¶å°†å…¶ç²¾ç¡®æ˜ å°„åˆ°ä¸€ç³»åˆ—æ“ä½œæ—¶ï¼Œä¹Ÿæ—¶å¸¸åŠ›ä¸ä»å¿ƒã€‚ä¸€æ–¹é¢ï¼Œå› ä¸ºchat2graphçš„è°ƒç”¨é“¾å¯èƒ½ä¼šå¾ˆé•¿ï¼Œå³ä¾¿å¤§æ¨¡å‹æ¨ç†å•æ­¥å‡†ç¡®ç‡é«˜è¾¾95%ï¼Œä½†éšç€è°ƒç”¨é“¾è·¯çš„å»¶é•¿ï¼Œè¯¯å·®ä¼šé€çº§ç´¯ç§¯ï¼Œå¯¼è‡´æ•´ä½“ä»»åŠ¡çš„æˆåŠŸç‡æ€¥å‰§ä¸‹é™ã€‚å¦ä¸€æ–¹é¢ï¼Œå³ä½¿è°ƒç”¨é“¾çš„é—®é¢˜ä¸å­˜åœ¨ï¼Œé€šè¿‡promptçš„æ–¹å¼è®©æ¨¡å‹è‡ªåŠ¨è§„åˆ’çš„å‡†ç¡®åº¦ç›®å‰ä»ç„¶ä¸èƒ½ä½¿äººæ»¡æ„ã€‚å®Œå…¨ä¾èµ–å¤§æ¨¡å‹è¿›è¡Œé›¶æ ·æœ¬å·¥ä½œæµè§„åˆ’çš„æ—¶ä»£ï¼Œæˆ–è®¸è¿˜æœªå®Œå…¨åˆ°æ¥ã€‚
â€œä¸€å£åƒä¸æˆèƒ–å­â€ï¼Œäºæ˜¯æˆ‘ä»¬åšå‡ºäº†ä¸€ä¸ªå…³é”®å†³ç­–ï¼šè®©å¤§æ¨¡å‹ä»é›¶å¼€å§‹æ„å»ºå·¥ä½œæµå­˜åœ¨é˜»ç¢ï¼Œä½†æ˜¯å¦‚æœè®©å¤§æ¨¡å‹åŸºäºWorkflowæ¨¡æ¿â€œå®ä¾‹åŒ–â€å…·ä½“çš„Workflowæˆ–è®¸æ˜¯ä¸€ç§å¯è¡Œçš„æ–¹æ¡ˆã€‚æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€é«˜åº¦æ¨¡å—åŒ–çš„ GraphRAG å·¥ä½œæµï¼Œè€Œ LLM çš„ä»»åŠ¡ï¼Œå°±æ˜¯æ ¹æ®è§‚ä¼—ç”¨æˆ·è¯·æ±‚çš„ç‰¹ç‚¹ï¼Œä¸ºWorkflowé€‰æ‹©æœ€ä¼˜é…ç½®ã€‚è¿™æ˜¯æˆ‘ä»¬åœ¨Agentic GraphRAGå’ŒGraphRAGä¹‹é—´æ‰¾åˆ°çš„ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚
è¿™è®©æˆ‘ä»¬çš„æ ¸å¿ƒé—®é¢˜å‘ç”Ÿäº†è½¬å˜ï¼Œä¸å†æ˜¯â€œå¦‚ä½•ä»é›¶æ„å»ºâ€ï¼Œè€Œæ˜¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>æˆ‘ä»¬å¦‚ä½•ä»ç”¨æˆ·çš„å¯¥å¯¥æ•°è¯­ä¸­ï¼Œè®©å¤§æ¨¡å‹çŸ¥é“ä»€ä¹ˆæ˜¯GraphRAGçš„æœ€ä¼˜é…ç½®ï¼Ÿ&lt;/p>
&lt;/blockquote>
&lt;p>ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>ğŸ‘‰ğŸ¼ ç»™å®šä¸€ä¸ªç”¨æˆ·è¯·æ±‚ï¼Œæˆ‘ä»¬æ€ä¹ˆé€šè¿‡ç”¨æˆ·çš„è¯·æ±‚æ¨æ–­å‡ºæœ€ä¼˜é…ç½®å‘¢ï¼Ÿ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> å…·ä½“ä¾‹å­ï¼šç”¨æˆ·çš„è¯·æ±‚æ˜¯ï¼šå‘Šè¯‰æˆ‘â€œæå‡ºæ°´æ˜¯ä¸‡ç‰©çš„æœ¬æºâ€çš„å“²å­¦å®¶çš„å¾’å¼Ÿæå‡ºçš„æœ¬ä½“è®ºè§‚ç‚¹ã€‚é‚£ä¹ˆé‡‡ç”¨ä»€ä¹ˆå›¾ç®—æ³•è¿›è¡ŒçŸ¥è¯†å›¾è°±æ£€ç´¢ä¼šä½¿å¾—ç»“æœæ›´ç²¾ç¡®å‘¢ï¼Ÿ
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç»¼ä¸Šæ‰€è¿°ï¼ŒLLMéœ€è¦ç«™åœ¨è‡ªç„¶è¯­è¨€å¤„ç†å’Œå›¾æ•°æ®åº“è¿™ä¸¤åº§å¤§å±±ä¸Šæ‰èƒ½çœŸæ­£çª¥è§é—®é¢˜å…¨è²Œï¼Œè€Œä»–ç°åœ¨è¿˜å¤„äºå±±è„šğŸ¤£ã€‚è€Œè¿™ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸‹ä¸€åº§äºŸå¾…ç¿»è¶Šçš„é«˜å±±ã€‚&lt;/p>
&lt;h2 id="åæ€">åæ€&lt;/h2>
&lt;p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº† CGraph ä½œä¸ºåº•å±‚çš„å›¾è°ƒåº¦æ¡†æ¶ã€‚å…¶åŸºäº Graph API çš„è®¾è®¡ï¼ŒæˆåŠŸåœ°å°† Workflow çš„å®šä¹‰ä¸å„ä¸ª Node çš„å…·ä½“å®ç°è§£è€¦ï¼Œèµ‹äºˆäº†ç³»ç»Ÿè‰¯å¥½çš„æ‰©å±•æ€§ã€‚&lt;/p>
&lt;p>ç„¶è€Œï¼Œæˆ‘ä»¬ä¹Ÿæ³¨æ„åˆ°ï¼Œè¿™ç§å£°æ˜å¼ API åœ¨å¸¦æ¥çµæ´»æ€§çš„åŒæ—¶ï¼Œä¹Ÿå¼•å…¥äº†æ–°çš„ç¼–ç¨‹å¤æ‚åº¦ã€‚éšç€æˆ‘ä»¬è¶Šæ¥è¶Šå¤šåœ°ä½¿ç”¨ Conditionã€Region ç­‰ CGraph çš„é«˜çº§ç‰¹æ€§ï¼Œç”¨äºæ„å»º Workflow çš„ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¼€å§‹é¢ä¸´æŒ‘æˆ˜ã€‚è¿™å¼•å‘äº†æˆ‘ä»¬çš„ä¸€ä¸ªæ ¸å¿ƒæ€è€ƒï¼š&lt;strong>æ˜¯å¦å­˜åœ¨ä¸€ç§æ›´ä¸ºç›´è§‚å’Œç”¨æˆ·å‹å¥½çš„æ¥å£ï¼Œæ—¢èƒ½ä¿æŒæ¡†æ¶çš„çµæ´»æ€§ï¼Œåˆèƒ½é™ä½å®šä¹‰å¤æ‚æµç¨‹æ—¶çš„è®¤çŸ¥è´Ÿæ‹…ï¼Ÿ&lt;/strong>&lt;/p>
&lt;p>ä¸¾ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼šå½“æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªä¸» Workflow å’Œä¸€ä¸ªä½œä¸ºå…¶å­é›†çš„å­ Workflow æ—¶ï¼Œç›®å‰çš„å®ç°æ–¹å¼å€¾å‘äºå°†å­ Workflow å°è£…ä¸º GRegionï¼Œå¹¶åˆ©ç”¨ Condition èŠ‚ç‚¹æ¥æ§åˆ¶å…¶æ‰§è¡Œã€‚è¿™ç§â€œåˆå¹¶â€å¼çš„å®šä¹‰æ–¹å¼è™½ç„¶åŠŸèƒ½ä¸Šå¯è¡Œï¼Œä½†æ— ç–‘å¢åŠ äº† Workflow çš„å†…åœ¨å¤æ‚åº¦å’Œç†è§£éš¾åº¦ã€‚æˆ‘ä»¬è®¾æƒ³ï¼Œå¦‚æœ CGraph æ¡†æ¶èƒ½åŸç”Ÿæä¾›&lt;strong>å­å›¾ç»„åˆ (Subgraph Composition)&lt;/strong> çš„èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…å°†ä¸€ä¸ª Workflow æ˜¾å¼å£°æ˜ä¸ºå¦ä¸€ä¸ª Workflow çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–è®¸èƒ½ä»æ ¹æœ¬ä¸Šç®€åŒ–è¿™ç±»åœºæ™¯çš„å®ç°ã€‚&lt;/p>
&lt;p>å°½ç®¡å­˜åœ¨ä¸Šè¿°æŒ‘æˆ˜ï¼ŒCGraph æ¡†æ¶åœ¨é¡¹ç›®ä¸­ä¾ç„¶å‘æŒ¥äº†é‡è¦ä½œç”¨ï¼Œæ˜¾è‘—æå‡äº†æˆ‘ä»¬çš„å·¥ç¨‹æ•ˆç‡ï¼š&lt;/p>
&lt;ol>
&lt;li>&lt;strong>æ€§èƒ½è¯Šæ–­ç®€åŒ–&lt;/strong>ï¼šæ¡†æ¶è‡ªå¸¦çš„ Perf å·¥å…·ä½¿æ€§èƒ½ç“¶é¢ˆå®šä½æ›´ä¸ºä¾¿æ·ï¼Œå³ä½¿å¤§éƒ¨åˆ†è€—æ—¶æœ€ç»ˆé›†ä¸­åœ¨ LLM è°ƒç”¨ä¸Šï¼Œè¯¥å·¥å…·ä¾ç„¶ä¸ºæˆ‘ä»¬æä¾›äº†æ¸…æ™°çš„æ€§èƒ½è§†å›¾ã€‚&lt;/li>
&lt;li>&lt;strong>è°ƒåº¦é€»è¾‘ä¸‹æ²‰&lt;/strong>ï¼šåº•å±‚çš„ Pooling æŠ½è±¡æœºåˆ¶ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿå°†éƒ¨åˆ†è°ƒåº¦é€»è¾‘æ— ç¼ä¸‹æ²‰è‡³ C++ ä¾§ï¼Œè€Œä¸Šå±‚ä¸šåŠ¡ä»£ç æ— éœ€å…³å¿ƒå…¶å…·ä½“å®ç°ã€‚&lt;/li>
&lt;/ol>
&lt;p>æœ€åï¼Œæˆ‘æƒ³è¯´ï¼ŒæŠ€æœ¯ä¸Šçš„æ¢ç´¢å›ºç„¶é‡è¦ï¼Œä½†è¿™æ®µæ—…ç¨‹ä¸­æœ€å®è´µçš„è´¢å¯Œï¼Œæ˜¯ä¸ä¼˜ç§€çš„åŒè¡Œè€…å…±äº‹çš„ç»å†ä»¥åŠä»ä¸­è·å¾—çš„æˆé•¿ä¸æ„Ÿæ‚Ÿã€‚è¿™æ‰æ˜¯æ¨åŠ¨æˆ‘ä»¬ä¸æ–­å‰è¡Œçš„çœŸæ­£åŠ¨åŠ›ã€‚&lt;/p>
&lt;h1 id="ç»“è¯­">ç»“è¯­&lt;/h1>
&lt;p>åœ¨ HugeGraph-AI çš„é‡æ„ä¸é©æ–°è¿‡ç¨‹ä¸­ï¼ŒAIå·¥å…·çš„å¼•å…¥å¤§å¤§æå‡äº†å¼€å‘æ•ˆç‡ï¼Œä½†æœ€ç»ˆçš„å†³ç­–å’Œå–èˆï¼Œä»ç„¶éœ€è¦ä¸¥è°¨çš„æ€è€ƒï¼ŒTalk is not cheap, thinking is necessaryã€‚æ¯å½“é‡åˆ°æ–°çš„æŠ€æœ¯éš¾é¢˜ï¼Œæˆ‘ä»¬æ€»èƒ½æå‡ºå¤šç§è§£å†³æ–¹æ¡ˆï¼Œè€ŒçœŸæ­£çš„è€ƒéªŒåœ¨äºå¦‚ä½•åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œæƒè¡¡ (trade-off)ã€‚æŠ€æœ¯ä¸–ç•Œå¹¶ééé»‘å³ç™½ï¼Œä¸åŒçš„æ¶æ„é€‰æ‹©ã€æ–¹æ¡ˆå–èˆï¼Œå¾€å¾€å¯¹åº”ç€ä¸åŒçš„ç›®æ ‡ç”¨æˆ·ä¸åº”ç”¨åœºæ™¯ã€‚æˆ‘ä»¬å¯¹ CGraph çš„é€‰æ‹©ï¼Œæ­£æ˜¯è¿™ä¸€ç†å¿µçš„æœ€ä½³å®è·µã€‚å®ƒå¹¶éä¸šç•Œé¦–ä¸ªå›¾è°ƒåº¦æ¡†æ¶ï¼Œä½†åœ¨æ€§èƒ½ã€çµæ´»æ€§ä¸å¼€å‘æˆæœ¬ç­‰è¯¸å¤šç»´åº¦çš„è€ƒé‡ä¸­ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†æœ€å¥‘åˆå½“å‰éœ€æ±‚çš„å¹³è¡¡ç‚¹â€”â€”åœ¨è¿™æ¡å……æ»¡æƒè¡¡çš„é“è·¯ä¸Šï¼Œå®ƒç¦»æˆ‘ä»¬æœ€è¿‘ã€‚&lt;/p>
&lt;p>è¿™ä¹Ÿè®©æˆ‘ä»¬æ›´åŠ åšä¿¡ï¼šä¸€ä¸ªäº§å“æˆ–æŠ€æœ¯æœ€ç»ˆè¢«é€‰æ‹©ï¼Œå¾€å¾€ä¸åªå› å…¶ç†å¿µçš„å…ˆè¿›ï¼Œæ›´åœ¨äºå®ƒèƒ½å¦åœ¨å¤æ‚çš„ç°å®çº¦æŸä¸‹ï¼Œä¸ºç‰¹å®šé—®é¢˜æä¾›æœ€åŠ¡å®çš„è§£æ³•ã€‚&lt;/p>
&lt;p>é¡¹ç›®æš‚å‘Šä¸€æ®µè½ï¼Œç”±è¡·æ„Ÿè°¢æ¯ä¸€ä½å¹¶è‚©ä½œæˆ˜çš„ä¼™ä¼´ï¼è¿™æ®µç»å†å› ä½ ä»¬è€Œç²¾å½©ã€‚&lt;/p></description></item><item><title>Blog: ToplingDB Quick Start</title><link>/cn/blog/2025/10/09/toplingdb-quick-start/</link><pubDate>Thu, 09 Oct 2025 00:00:00 +0000</pubDate><guid>/cn/blog/2025/10/09/toplingdb-quick-start/</guid><description>
&lt;h2 id="å‰ç½®æ¡ä»¶">å‰ç½®æ¡ä»¶&lt;/h2>
&lt;ul>
&lt;li>HugeGraph ç‰ˆæœ¬: &amp;gt; 1.5.0&lt;/li>
&lt;li>Java ç‰ˆæœ¬: &amp;gt;= 11&lt;/li>
&lt;li>ç¡®ä¿å·²ä¸‹è½½ &lt;a href="https://github.com/topling/toplingdb?tab=readme-ov-file#compile--run-db_bench">ToplingDB ç›¸å…³ä¾èµ–&lt;/a>&lt;/li>
&lt;li>æ“ä½œç³»ç»Ÿ: Linux&lt;/li>
&lt;/ul>
&lt;h2 id="å¯åŠ¨å’Œé…ç½®">å¯åŠ¨å’Œé…ç½®&lt;/h2>
&lt;blockquote>
&lt;p>&lt;a href="https://github.com/topling/toplingdb">ToplingDB&lt;/a>æ˜¯å¯¹ RocksDB çš„å¯é…ç½®ã€å¯è§‚æµ‹æ‰©å±•ï¼Œæ”¯æŒé€šè¿‡ YAML æ–‡ä»¶è¿›è¡ŒåŠ¨æ€è°ƒä¼˜ï¼Œå¹¶é€šè¿‡å†…ç½® Web Server å®ç°å®æ—¶ç›‘æ§&lt;/p>
&lt;/blockquote>
&lt;p>ä¿®æ”¹ &lt;code>hugegraph.properties&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>backend=rocksdb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>serializer=binary
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rocksdb.data_path=.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rocksdb.wal_path=.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># é…ç½®æ–‡ä»¶è·¯å¾„
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># å‡ºäºå®‰å…¨æ€§è€ƒè™‘, HGä¸­ä»…å…è®¸ yaml æ–‡ä»¶ä½äºconf/graphsç›®å½•ä¸‹
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rocksdb.option_path=./conf/graphs/rocksdb_plus.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># æ˜¯å¦å¼€å¯Web Server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rocksdb.open_http=true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>åˆå§‹åŒ–æ•°æ®åº“ï¼ˆç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶æˆ–åœ¨ &lt;code>conf/graphs/&lt;/code> ä¸‹æ‰‹åŠ¨æ·»åŠ äº†æ–°é…ç½®æ—¶éœ€è¦è¿›è¡Œåˆå§‹åŒ–ï¼‰&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87">cd&lt;/span> *hugegraph-&lt;span style="color:#4e9a06">${&lt;/span>&lt;span style="color:#000">version&lt;/span>&lt;span style="color:#4e9a06">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bin/init-store.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¯åŠ¨ server&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>bin/start-hugegraph.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Starting HugeGraphServer...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Connecting to HugeGraphServer &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>http://127.0.0.1:8080/graphs&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>....OK
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æç¤ºçš„ url ä¸ &lt;code>rest-server.properties&lt;/code> ä¸­é…ç½®çš„ &lt;code>restserver.url&lt;/code> ä¸€è‡´&lt;/p>
&lt;p>Web Server çš„ç›‘å¬ç«¯å£åœ¨ YAML æ–‡ä»¶ä¸­é€šè¿‡ &lt;code>http.listening_ports&lt;/code> å­—æ®µè¿›è¡Œé…ç½®&lt;/p>
&lt;h2 id="éªŒè¯toplingdbæ˜¯å¦æ­£å¸¸å·¥ä½œ">éªŒè¯ToplingDBæ˜¯å¦æ­£å¸¸å·¥ä½œ&lt;/h2>
&lt;h3 id="å‰æ-ç¡®ä¿æ ¸å¿ƒå‚æ•°é…ç½®æ­£ç¡®">å‰æ: ç¡®ä¿æ ¸å¿ƒå‚æ•°é…ç½®æ­£ç¡®&lt;/h3>
&lt;p>æ£€æŸ¥ &lt;code>hugegraph.properties&lt;/code> ä¸­åŒ…å«:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span># é…ç½®æ–‡ä»¶è·¯å¾„
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rocksdb.option_path=./conf/graphs/rocksdb_plus.yaml
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># æ˜¯å¦å¼€å¯Web Server
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rocksdb.open_http=true
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ–¹å¼ä¸€-è®¿é—®webç›‘æ§ç•Œé¢">æ–¹å¼ä¸€: è®¿é—®Webç›‘æ§ç•Œé¢&lt;/h3>
&lt;p>å¯è§†åŒ–è®¿é—®Webç›‘æ§é¡µé¢ï¼Œé¡µé¢ç¤ºä¾‹å¦‚ä¸‹å›¾æ‰€ç¤º:&lt;/p>
&lt;div style="text-align: center;">
&lt;img src="/blog/images/images-server/toplingdb-web-server.png" alt="image" width="400">
&lt;/div>
&lt;p>é€šè¿‡ç»ˆç«¯éªŒè¯:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#8f5902;font-style:italic"># è®¿é—® http://localhost:2011 (ç«¯å£å·å–å†³äº YAML é…ç½®ä¸­çš„ listening_ports)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl http://localhost:2011 &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep topling
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¾—åˆ°ä»¥ä¸‹è¾“å‡ºè¯´æ˜é¡µé¢æ­£å¸¸:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-html" data-lang="html">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">p&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">a&lt;/span> &lt;span style="color:#c4a000">href&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;https://topling.cn&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>Topling Inc.&lt;span style="color:#000;font-weight:bold">&amp;lt;/&lt;/span>&lt;span style="color:#204a87;font-weight:bold">a&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>This is &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">strong&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>Engine Inspector&lt;span style="color:#000;font-weight:bold">&amp;lt;/&lt;/span>&lt;span style="color:#204a87;font-weight:bold">strong&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>, for metrics, see &lt;span style="color:#000;font-weight:bold">&amp;lt;&lt;/span>&lt;span style="color:#204a87;font-weight:bold">a&lt;/span> &lt;span style="color:#c4a000">href&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#39;javascript:grafana()&amp;#39;&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>Grafana&lt;span style="color:#000;font-weight:bold">&amp;lt;/&lt;/span>&lt;span style="color:#204a87;font-weight:bold">a&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>!&lt;span style="color:#000;font-weight:bold">&amp;lt;/&lt;/span>&lt;span style="color:#204a87;font-weight:bold">p&lt;/span>&lt;span style="color:#000;font-weight:bold">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="æ–¹å¼äºŒ-æ£€æŸ¥æ—¥å¿—ä¸­çš„-toplingdb-åˆå§‹åŒ–ä¿¡æ¯">æ–¹å¼äºŒ: æ£€æŸ¥æ—¥å¿—ä¸­çš„ ToplingDB åˆå§‹åŒ–ä¿¡æ¯&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>tail -f logs/hugegraph-server.log &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep -i topling
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç±»ä¼¼è¾“å‡ºè¯´æ˜å­˜å‚¨å¼•æ“å¯åŠ¨ä¸ºToplingDB:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">2025&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">10&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">14&lt;/span> &lt;span style="color:#000">08&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">56&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">25&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">db&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">open&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">1&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">INFO&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">o&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">a&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">h&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">b&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">s&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">r&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">RocksDBStdSessions&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span> &lt;span style="color:#000">SidePluginRepo&lt;/span> &lt;span style="color:#000">found&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span> &lt;span style="color:#000">Will&lt;/span> &lt;span style="color:#000">attempt&lt;/span> &lt;span style="color:#000">to&lt;/span> &lt;span style="color:#000">open&lt;/span> &lt;span style="color:#000">multi&lt;/span> &lt;span style="color:#000">CFs&lt;/span> &lt;span style="color:#000">RocksDB&lt;/span> &lt;span style="color:#000">using&lt;/span> &lt;span style="color:#000">Topling&lt;/span> &lt;span style="color:#000">plugin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">2025&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">10&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">14&lt;/span> &lt;span style="color:#000">08&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">56&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">25&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">db&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">open&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">1&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">INFO&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">o&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">a&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">h&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">b&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">s&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">r&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">RocksDBStdSessions&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span> &lt;span style="color:#000">Topling&lt;/span> &lt;span style="color:#000">HTTP&lt;/span> &lt;span style="color:#000">Server&lt;/span> &lt;span style="color:#000">has&lt;/span> &lt;span style="color:#000">been&lt;/span> &lt;span style="color:#000">started&lt;/span> &lt;span style="color:#000">according&lt;/span> &lt;span style="color:#000">to&lt;/span> &lt;span style="color:#000">the&lt;/span> &lt;span style="color:#000">listening_ports&lt;/span> &lt;span style="color:#000">specified&lt;/span> &lt;span style="color:#000">in&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">./&lt;/span>&lt;span style="color:#000">conf&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">graphs&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">rocksdb_plus&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">yaml&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="å¸¸è§é—®é¢˜æ’æŸ¥">å¸¸è§é—®é¢˜æ’æŸ¥&lt;/h2>
&lt;h3 id="é—®é¢˜-1-å¯åŠ¨å¤±è´¥æç¤º-yaml-æ ¼å¼é”™è¯¯">é—®é¢˜ 1: å¯åŠ¨å¤±è´¥ï¼Œæç¤º YAML æ ¼å¼é”™è¯¯&lt;/h3>
&lt;p>å¯åŠ¨æ—¶æœ‰ç±»ä¼¼æ—¥å¿—ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">2025&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">10&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">15&lt;/span> &lt;span style="color:#000">01&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">55&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">50&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">db&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">open&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">1&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">INFO&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">o&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">a&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">h&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">b&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">s&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">r&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">RocksDBStdSessions&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span> &lt;span style="color:#000">SidePluginRepo&lt;/span> &lt;span style="color:#000">found&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span> &lt;span style="color:#000">Will&lt;/span> &lt;span style="color:#000">attempt&lt;/span> &lt;span style="color:#000">to&lt;/span> &lt;span style="color:#000">open&lt;/span> &lt;span style="color:#000">multi&lt;/span> &lt;span style="color:#000">CFs&lt;/span> &lt;span style="color:#000">RocksDB&lt;/span> &lt;span style="color:#000">using&lt;/span> &lt;span style="color:#000">Topling&lt;/span> &lt;span style="color:#000">plugin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f57900">21:&lt;/span>&lt;span style="color:#000">1&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">891B&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">):&lt;/span>&lt;span style="color:#000">ERROR&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">sideplugin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">rockside&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">3rdparty&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">rapidyaml&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">src&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">c4&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">yml&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">parse&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">cpp&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">3310&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">ERROR&lt;/span> &lt;span style="color:#000">parsing&lt;/span> &lt;span style="color:#000">yml&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">parse&lt;/span> &lt;span style="color:#000">error&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">incorrect&lt;/span> &lt;span style="color:#000">indentation&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">?&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>è§£å†³æ–¹æ¡ˆ&lt;/strong>:&lt;/p>
&lt;ol>
&lt;li>æ£€æŸ¥ YAML æ–‡ä»¶ç¼©è¿›æ˜¯å¦æ­£ç¡®ï¼ˆå¿…é¡»ä½¿ç”¨ç©ºæ ¼ï¼Œä¸èƒ½ä½¿ç”¨ Tabï¼‰&lt;/li>
&lt;li>éªŒè¯ YAML è¯­æ³•: &lt;code>python -c &amp;quot;import yaml; yaml.safe_load(open('conf/graphs/rocksdb_plus.yaml'))&amp;quot;&lt;/code>&lt;/li>
&lt;li>æ£€æŸ¥æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯ä¿¡æ¯&lt;/li>
&lt;/ol>
&lt;h3 id="é—®é¢˜-2-web-server-ç«¯å£å†²çª">é—®é¢˜ 2: Web Server ç«¯å£å†²çª&lt;/h3>
&lt;p>å¯åŠ¨æ—¶æœ‰ç±»ä¼¼æ—¥å¿—ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">2025&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">10&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">15&lt;/span> &lt;span style="color:#000">01&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">57&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">34&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">db&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">open&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">1&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">INFO&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">o&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">a&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">h&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">b&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">s&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">r&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">RocksDBStdSessions&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span> &lt;span style="color:#000">SidePluginRepo&lt;/span> &lt;span style="color:#000">found&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span> &lt;span style="color:#000">Will&lt;/span> &lt;span style="color:#000">attempt&lt;/span> &lt;span style="color:#000">to&lt;/span> &lt;span style="color:#000">open&lt;/span> &lt;span style="color:#000">multi&lt;/span> &lt;span style="color:#000">CFs&lt;/span> &lt;span style="color:#000">RocksDB&lt;/span> &lt;span style="color:#000">using&lt;/span> &lt;span style="color:#000">Topling&lt;/span> &lt;span style="color:#000">plugin&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">2025&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">10&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">15&lt;/span> &lt;span style="color:#000">01&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">57&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">34&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">db&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">open&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">1&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">[&lt;/span>&lt;span style="color:#000">ERROR&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">]&lt;/span> &lt;span style="color:#000">o&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">a&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">h&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">b&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">s&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">r&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">RocksDBStore&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span> &lt;span style="color:#000">Failed&lt;/span> &lt;span style="color:#000">to&lt;/span> &lt;span style="color:#000">open&lt;/span> &lt;span style="color:#000">RocksDB&lt;/span> &lt;span style="color:#a40000">&amp;#39;&lt;/span>&lt;span style="color:#000">rocksdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">data&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">data&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">g&lt;/span>&lt;span style="color:#a40000">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">org&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">rocksdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">RocksDBException&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">rocksdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">::&lt;/span>&lt;span style="color:#000">Status&lt;/span> &lt;span style="color:#000">rocksdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">::&lt;/span>&lt;span style="color:#000">SidePluginRepo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">::&lt;/span>&lt;span style="color:#000">StartHttpServer&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">():&lt;/span> &lt;span style="color:#204a87;font-weight:bold">null&lt;/span> &lt;span style="color:#000">context&lt;/span> &lt;span style="color:#000">when&lt;/span> &lt;span style="color:#000">constructing&lt;/span> &lt;span style="color:#000">CivetServer&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span> &lt;span style="color:#000">Possible&lt;/span> &lt;span style="color:#000">problem&lt;/span> &lt;span style="color:#000">binding&lt;/span> &lt;span style="color:#000">to&lt;/span> &lt;span style="color:#000">port&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">at&lt;/span> &lt;span style="color:#000">org&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">rocksdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">SidePluginRepo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">startHttpServer&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Native&lt;/span> &lt;span style="color:#000">Method&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span> &lt;span style="color:#ce5c00;font-weight:bold">~[&lt;/span>&lt;span style="color:#000">rocksdbjni&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">8&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">10&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">2&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">20250804&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">074027&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">4&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">jar&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:?]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>è§£å†³æ–¹æ¡ˆ&lt;/strong>:&lt;/p>
&lt;ol>
&lt;li>æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨: &lt;code>lsof -i :2011&lt;/code>&lt;/li>
&lt;li>ä¿®æ”¹ YAML æ–‡ä»¶ä¸­çš„ &lt;code>listening_ports&lt;/code> é…ç½®&lt;/li>
&lt;li>é‡å¯ HugeGraph Server&lt;/li>
&lt;/ol>
&lt;h3 id="é—®é¢˜-3-åˆå§‹åŒ–æ•°æ®åº“å¤±è´¥">é—®é¢˜ 3: åˆå§‹åŒ–æ•°æ®åº“å¤±è´¥&lt;/h3>
&lt;p>ç±»ä¼¼è¾“å‡ºè¯´æ˜æ— æ³•è·å–æ•°æ®åº“é”ï¼Œå¯èƒ½ç¼ºä¹å†™æƒé™ï¼Œä¹Ÿå¯èƒ½æ˜¯è¢«æ•°æ®åº“è¢«å¦å¤–ä¸€ä¸ªè¿›ç¨‹é”å®š:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000">Caused&lt;/span> &lt;span style="color:#000">by&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">org&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">rocksdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">RocksDBException&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">While&lt;/span> &lt;span style="color:#000">lock&lt;/span> &lt;span style="color:#000">file&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">rocksdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">-&lt;/span>&lt;span style="color:#000">data&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">data&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">m&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">/&lt;/span>&lt;span style="color:#000">LOCK&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span> &lt;span style="color:#000">Resource&lt;/span> &lt;span style="color:#000">temporarily&lt;/span> &lt;span style="color:#000">unavailable&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">at&lt;/span> &lt;span style="color:#000">org&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">rocksdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">SidePluginRepo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">nativeOpenDBMultiCF&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">Native&lt;/span> &lt;span style="color:#000">Method&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000">at&lt;/span> &lt;span style="color:#000">org&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">rocksdb&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">SidePluginRepo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">openDB&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">(&lt;/span>&lt;span style="color:#000">SidePluginRepo&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">.&lt;/span>&lt;span style="color:#c4a000">java&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">:&lt;/span>&lt;span style="color:#000">22&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>è§£å†³æ–¹æ¡ˆ&lt;/strong>:&lt;/p>
&lt;ol>
&lt;li>ç¡®è®¤é…ç½®æ–‡ä»¶è·¯å¾„æ­£ç¡®: &lt;code>rocksdb.option_path=./conf/graphs/rocksdb_plus.yaml&lt;/code>&lt;/li>
&lt;li>æ£€æŸ¥æ•°æ®ç›®å½•æƒé™: ç¡®ä¿è¿è¡Œç”¨æˆ·æœ‰è¯»å†™æƒé™&lt;/li>
&lt;li>æŸ¥çœ‹è¯¦ç»†æ—¥å¿—: &lt;code>bin/init-store.sh 2&amp;gt;&amp;amp;1 | tee init.log&lt;/code>&lt;/li>
&lt;/ol>
&lt;h2 id="ç›¸å…³æ–‡æ¡£">ç›¸å…³æ–‡æ¡£&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="/cn/blog/2025/09/30/toplingdb-yaml-configuration-file/">ToplingDB YAML é…ç½®è¯¦è§£&lt;/a> - äº†è§£é…ç½®æ–‡ä»¶ä¸­å„å‚æ•°çš„å«ä¹‰&lt;/li>
&lt;li>&lt;a href="/docs/config/config-option/">HugeGraph é…ç½®è¯´æ˜&lt;/a> - HugeGraph æ ¸å¿ƒé…ç½®å‚è€ƒ&lt;/li>
&lt;li>&lt;a href="https://github.com/topling/toplingdb">ToplingDB GitHub ä»“åº“&lt;/a> - å®˜æ–¹æ–‡æ¡£å’Œæœ€æ–°æ›´æ–°&lt;/li>
&lt;/ul></description></item><item><title>Blog: ToplingDB YAML configuration file</title><link>/cn/blog/2025/09/30/toplingdb-yaml-configuration-file/</link><pubDate>Tue, 30 Sep 2025 00:00:00 +0000</pubDate><guid>/cn/blog/2025/09/30/toplingdb-yaml-configuration-file/</guid><description>
&lt;p>RocksDB æä¾›äº†ä¸°å¯Œçš„å‚æ•°é…ç½®ï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™äº›é…ç½®éœ€è¦é€šè¿‡ç¡¬ç¼–ç å®Œæˆã€‚&lt;/p>
&lt;p>&lt;a href="https://github.com/topling/toplingdb">ToplingDB&lt;/a> åœ¨æ­¤åŸºç¡€ä¸Šå¼•å…¥äº† &lt;strong>SidePlugin + YAML&lt;/strong> çš„æ–¹å¼ï¼Œä½¿å¾—é…ç½®æ›´åŠ æ¨¡å—åŒ–å’Œå¯ç»„åˆã€‚&lt;/p>
&lt;p>æœ¬æ–‡é‡ç‚¹ä»‹ç» &lt;strong>ToplingDB æ‰©å±•å‚æ•°&lt;/strong> çš„éƒ¨åˆ†ï¼Œå¸®åŠ©è¯»è€…ç†è§£è¿™äº›é…ç½®çš„æ„ä¹‰ã€‚&lt;/p>
&lt;h2 id="æœ¯è¯­è¯´æ˜">æœ¯è¯­è¯´æ˜&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>MemTable&lt;/strong>: LSM-Tree åœ¨å†…å­˜ä¸­çš„å¯å†™æ•°æ®ç»“æ„ï¼Œæ¥æ”¶æ–°å†™å…¥çš„æ•°æ®&lt;/li>
&lt;li>&lt;strong>SST (Sorted String Table)&lt;/strong>: Memtable æŒä¹…åŒ–åˆ°ç£ç›˜åç”Ÿæˆçš„æœ‰åºé”®å€¼å¯¹æ–‡ä»¶&lt;/li>
&lt;li>&lt;strong>Flush&lt;/strong>: å°† MemTable æ•°æ®å†™å…¥ç£ç›˜ç”Ÿæˆ SST çš„è¿‡ç¨‹&lt;/li>
&lt;li>&lt;strong>Compaction&lt;/strong>: åˆå¹¶å¤šä¸ª SST æ–‡ä»¶ä»¥ä¼˜åŒ–å­˜å‚¨å’ŒæŸ¥è¯¢æ€§èƒ½çš„è¿‡ç¨‹&lt;/li>
&lt;li>&lt;strong>L0, L1, &amp;hellip; L6&lt;/strong>: LSM-Tree çš„ä¸åŒå±‚çº§ï¼Œæ•°å­—è¶Šå¤§å±‚çº§è¶Šæ·±&lt;/li>
&lt;/ul>
&lt;h2 id="0-hugegraph-ä¸­æä¾›çš„rocksdb_plusyaml">0. HugeGraph ä¸­æä¾›çš„rocksdb_plus.yaml&lt;/h2>
&lt;p>ä¸‹æ–‡åªåŒ…æ‹¬HugeGraphä¸­æ‰€ä½¿ç”¨çš„é…ç½®å‚æ•°ï¼ŒToplingDBæ”¯æŒçš„å®Œæ•´é…ç½®è¯·å‚è€ƒï¼š&lt;a href="https://github.com/topling/sideplugin-wiki-en/wiki">SidePlugin Wiki&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">http&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># Web Server ç›¸å…³é…ç½®&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># normally parent path of db path&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">document_root&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">/dev/shm/rocksdb_resource&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># é™æ€èµ„æºç›®å½•, HugeGraphä¸­é€šè¿‡`preload_topling.sh`è¿›è¡Œé™æ€èµ„æºæå–&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">listening_ports&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#39;127.0.0.1:2011&amp;#39;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># Web Serverç›‘å¬ç«¯å£ï¼Œç”¨äºç®¡ç†/ç›‘æ§ å¦‚ç«¯å£è¢«å ç”¨ï¼Œè¯·æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼Œä¾‹å¦‚ 2012 æˆ– 2013&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">setenv&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ç¯å¢ƒå˜é‡è®¾ç½®&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">StrSimpleEnvNameNotOverwrite&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">StringValue&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">IntSimpleEnvNameNotOverwrite&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">16384&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">OverwriteThisEnv&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">#comment: overwrite is default to false&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">overwrite&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">value&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">force overwrite this env by overwrite true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">Cache&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># Cache ç›¸å…³é…ç½®&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">lru_cache&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># å®šä¹‰ä¸€ä¸ª LRU ç¼“å­˜å®ä¾‹&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">LRUCache&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">params&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">capacity&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">8G&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ç¼“å­˜å®¹é‡ 8GB&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">num_shard_bits&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># åˆ†ç‰‡æ•°é‡ï¼Œ-1 è¡¨ç¤ºè‡ªåŠ¨&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">strict_capacity_limit&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">high_pri_pool_ratio&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0.5&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">use_adaptive_mutex&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata_charge_policy&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">kFullChargeCacheMetadata&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># å…ƒæ•°æ®ä¹Ÿè®¡å…¥ç¼“å­˜å®¹é‡&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">Statistics&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># æ•°æ®é‡‡æ ·é…ç½®&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">stat&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">default&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">params&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">discard_tickers&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ä¸¢å¼ƒçš„ç»Ÿè®¡è®¡æ•°å™¨ï¼Œå‡å°‘å¼€é”€&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.block.cache&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.block.cachecompressed&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.block&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.memtable.payload.bytes.at.flush&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.memtable.garbage.bytes.at.flush&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.txn&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.blobdb&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.row.cache&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.number.block&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.bloom.filter&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.persistent&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.sim.block.cache&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">discard_histograms&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ä¸¢å¼ƒçš„ç›´æ–¹å›¾ç»Ÿè®¡é¡¹&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># comment: ....&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.blobdb&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.bytes.compressed&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.bytes.decompressed&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.num.index.and.filter.blocks.read.per.level&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.num.data.blocks.read.per.level&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.compression.times.nanos&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.decompression.times.nanos&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.read.block.get.micros&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">rocksdb.write.raw.block.micros&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># comment end of array&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic">#stats_level: kAll&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">stats_level&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">kDisableAll &lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ç¦ç”¨æ‰€æœ‰ç»Ÿè®¡&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">MemTableRepFactory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># å†…å­˜ä¸­ memtable çš„å®ç°&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">cspp&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ToplingDB ç‹¬æœ‰çš„é«˜å¹¶å‘å†…å­˜ç»“æ„&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cspp&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">params&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">mem_cap&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">16G&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># é¢„åˆ†é…è¶³å¤Ÿçš„å•å—å†…å­˜åœ°å€ç©ºé—´ï¼Œè¿™äº›å†…å­˜å¯ä»¥åªæ˜¯ä¿ç•™åœ°å€ç©ºé—´ï¼Œä½†å¹¶æœªå®é™…åˆ†é… å¯¹ç‰©ç†å†…å­˜å¹¶æ— è¦æ±‚ï¼Œåªæ˜¯ä¸ºCSPPä¿ç•™è™šæ‹Ÿå†…å­˜ç©ºé—´&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">use_vm&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">token_use_idle&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">chunk_size&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">16K&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># å†…éƒ¨åˆ†é…ç²’åº¦&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">convert_to_sst&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">kFileMmap&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ç›´æ¥å°† MemTable è½¬åŒ–ä¸º SSTï¼Œçœå» Flushï¼Œå¯é€‰å€¼ï¼š{kDontConvert, kDumpMem, kFileMmap}&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">sync_sst_file&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># convert_to_sst ä¸º kFileMmap æ—¶ï¼ŒSST è½¬åŒ–å®Œæˆåæ˜¯å¦æ‰§è¡Œ fsync&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">skiplist&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># RocksDB é»˜è®¤çš„è·³è¡¨ç»“æ„&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">SkipList&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">params&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">lookahead&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">TableFactory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">cspp_memtab_sst&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">CSPPMemTabTable&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ä¸ cspp é…å¥—çš„ TableFactory&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">params&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># empty params&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">bb&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">BlockBasedTable&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># RocksDB é»˜è®¤çš„å—è¡¨&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">params&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">checksum&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">kCRC32c&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">block_size&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">4K&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">block_restart_interval&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">16&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">index_block_restart_interval&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">metadata_block_size&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">4K&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">enable_index_compression&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">block_cache&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;${lru_cache}&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„ LRU ç¼“å­˜&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">block_cache_compressed&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">persistent_cache&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">filter_policy&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">dispatch&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">class&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">DispatcherTable&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">params&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">default&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">bb&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># é»˜è®¤ä½¿ç”¨ BlockBasedTable&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">readers&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">BlockBasedTable&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">bb&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">CSPPMemTabTable&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">cspp_memtab_sst&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">level_writers&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000;font-weight:bold">[&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">bb, bb, bb, bb, bb, bb ]&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># æ”¯æŒè‡ªå®šä¹‰å„å±‚å†™å…¥ç­–ç•¥&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">CFOptions&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">default&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">max_write_buffer_number&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">6&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">memtable_factory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;${cspp}&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># å¼•ç”¨ä¸Šæ–¹å®šä¹‰çš„csppï¼Œä½¿ç”¨ cspp ä½œä¸º MemTable&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">write_buffer_size&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">128M&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># set target_file_size_base as small as 512K is to make many SST files,&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># thus key prefix cache can present efficiency&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">target_file_size_base&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">64M&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">target_file_size_multiplier&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">table_factory&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">dispatch&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># å¼•ç”¨ä¸Šæ–¹å®šä¹‰çš„ dispatch, ä½¿ç”¨ DispatcherTable Class&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">max_bytes_for_level_base&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">512M&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">max_bytes_for_level_multiplier&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">10&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">level_compaction_dynamic_level_bytes&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">level0_slowdown_writes_trigger&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">20&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">level0_stop_writes_trigger&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">36&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">level0_file_num_compaction_trigger&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">merge_operator&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">uint64add&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># support merge&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">level_compaction_dynamic_file_size&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">optimize_filters_for_hits&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">allow_merge_memtables&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">min_write_buffer_number_to_merge&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">2&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">compression_per_level&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">kNoCompression&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">kNoCompression&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">kSnappyCompression&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">kSnappyCompression&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">kSnappyCompression&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">kSnappyCompression&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">kSnappyCompression&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">DBOptions&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">dbo&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">create_if_missing&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">true&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">create_missing_column_families&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># this is important, must be false to hugegraph&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">max_background_compactions&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>-&lt;span style="color:#0000cf;font-weight:bold">1&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">max_subcompactions&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">4&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">max_level1_subcompactions&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">inplace_update_support&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">false&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">WAL_size_limit_MB&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">statistics&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#34;${stat}&amp;#34;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„ç»Ÿè®¡é…ç½®&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">max_manifest_file_size&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">100M&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">max_background_jobs&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">8&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># è®¾ç½®flushå’Œcompactionçº¿ç¨‹æ€»æ•° å»ºè®®è®¾ç½®ä¸º (cpuæ ¸æ•° / 2)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">compaction_readahead_size&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#0000cf;font-weight:bold">0&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">memtable_as_log_index: true # æ­¤é…ç½®ç»“åˆ convert_to_sst&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">kFileMmap å¯å®ç°[omit L0 Flush](https://github.com/topling/toplingdb/wiki/Omit-L0-Flush)&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>å…³é”®è¦ç‚¹&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;code>listening_ports: '127.0.0.1:2011'&lt;/code> æŒ‡å®šWeb Serverç›‘å¬ç«¯å£ä¸º2011ï¼Œå¹¶ä¸”ä»…å…è®¸æœ¬åœ°è®¿é—®&lt;/li>
&lt;li>&lt;code>memtable_as_log_index: true&lt;/code> ä¸ &lt;code>convert_to_sst: kFileMmap&lt;/code> ç»“åˆå®ç°&lt;a href="https://github.com/topling/toplingdb/wiki/Omit-L0-Flush">omit L0 Flush&lt;/a>&lt;/li>
&lt;li>&lt;code>memtable_factory: &amp;quot;${cspp}&amp;quot;&lt;/code> æŒ‡å®šäº†å†…å­˜ç»“æ„é‡‡ç”¨&lt;code>CSPP Memtable&lt;/code>&lt;/li>
&lt;li>&lt;code>table_factory: dispatch&lt;/code> æŒ‡å®šäº†TableFactoryä½¿ç”¨YAMLä¸­è‡ªå®šä¹‰çš„&lt;code>DispatcherTable&lt;/code>ç»“æ„&lt;/li>
&lt;/ul>
&lt;h2 id="1-æ’ä»¶åŒ–é…ç½®ä¸å¼•ç”¨æœºåˆ¶">1. æ’ä»¶åŒ–é…ç½®ä¸å¼•ç”¨æœºåˆ¶&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>YAML æ’ä»¶åŒ–&lt;/strong>ï¼šé…ç½®æ–‡ä»¶ä»¥å¯¹è±¡å½¢å¼ç»„ç»‡ï¼Œæ¯ä¸ªå¯¹è±¡å¯ä»¥å•ç‹¬å®šä¹‰å¹¶åœ¨å…¶ä»–åœ°æ–¹å¼•ç”¨ã€‚&lt;/li>
&lt;li>&lt;strong>å¼•ç”¨è¯­æ³•&lt;/strong>ï¼šé€šè¿‡ &lt;code>${lru_cache}&lt;/code>ã€&lt;code>${cspp}&lt;/code> ç­‰æ–¹å¼åœ¨ä¸åŒæ®µè½å¤ç”¨å¯¹è±¡ã€‚&lt;/li>
&lt;li>&lt;strong>DispatcherTable&lt;/strong>ï¼šå…è®¸åœ¨ä¸åŒå±‚çº§æˆ–åœºæ™¯ä¸‹é€‰æ‹©ä¸åŒçš„ TableFactoryã€‚RocksDB åŸç”Ÿåªèƒ½æŒ‡å®šå•ä¸€ TableFactoryã€‚&lt;/li>
&lt;/ul>
&lt;p>ToplingDB YAML å¼•ç”¨ä¸å¤ç”¨å›¾ç¤º:&lt;/p>
&lt;div style="text-align: center;">
&lt;img src="/blog/images/images-server/toplingdb-yaml-ref.png" alt="image" width="800">
&lt;/div>
&lt;p>è¿™ç§æœºåˆ¶ä½¿å¾—é…ç½®æ›´çµæ´»ï¼Œä¾¿äºåœ¨å¤æ‚åœºæ™¯ä¸‹ç»„åˆä¸åŒç»„ä»¶ã€‚&lt;/p>
&lt;h2 id="2-æ–°çš„-memtable-å®ç°cspp">2. æ–°çš„ MemTable å®ç°ï¼šCSPP&lt;/h2>
&lt;p>ToplingDB æä¾›äº†ä¸€ä¸ª RocksDB åŸç”Ÿæ²¡æœ‰çš„ MemTable ç±»å‹ï¼Œé€šè¿‡ä»¥ä¸‹å‚æ•°é…ç½®ï¼š&lt;/p>
&lt;h3 id="mem_cap">mem_cap&lt;/h3>
&lt;p>&lt;code>mem_cap&lt;/code> æ˜¯æŒ‡åœ¨å†…å­˜åœ°å€ç©ºé—´ä¸­ï¼Œä¸º CSPP é¢„ç•™çš„ç©ºé—´å¤§å°ï¼Œè¿™äº›å†…å­˜å¯ä»¥åªæ˜¯&lt;strong>ä¿ç•™åœ°å€ç©ºé—´ï¼Œå¹¶æœªå®é™…åˆ†é…çš„&lt;/strong>ã€‚
&lt;code>mem_cap&lt;/code> çœŸæ­£å ç”¨çš„å†…å­˜å¤§å°çº¦ä¸º &lt;code>write_buffer_size&lt;/code> ã€‚&lt;/p>
&lt;h4 id="mem_cap-è®¾è®¡èƒŒæ™¯">mem_cap è®¾è®¡èƒŒæ™¯&lt;/h4>
&lt;p>CSPP çš„åº•å±‚ç®—æ³•ä¸ºäº†æ”¯æŒé«˜å¹¶å‘å†™å…¥ï¼Œé‡‡ç”¨äº†é¢„åˆ†é…å†…å­˜çš„ç­–ç•¥ã€‚
å½“é¢„åˆ†é…çš„å†…å­˜è¢«å†™æ»¡æ—¶ï¼Œæ–°çš„å†™å…¥æ“ä½œå°†æ— æ³•ç»§ç»­ã€‚
ç„¶è€Œï¼ŒRocksDB æœ¬èº«ç¼ºä¹ä¸€ç§æœºåˆ¶ï¼Œä½¿å¾— memtable èƒ½å¤Ÿä¸»åŠ¨åé¦ˆ &amp;lsquo;é¢„åˆ†é…å†…å­˜å·²æ»¡ï¼Œéœ€è¦åˆ‡æ¢åˆ°æ–°çš„ memtable&amp;rsquo; ã€‚
ç”±äºå…¶å‡½æ•°è°ƒç”¨é“¾è·¯å¤æ‚ï¼Œéš¾ä»¥é€šè¿‡é‡æ„æ¥å®ç°è¿™ä¸€æœºåˆ¶ï¼Œå› æ­¤ &lt;code>CSPP&lt;/code> åªèƒ½é€šè¿‡å‚æ•°è®¾è®¡æ¥é€‚é… RocksDB çš„è¡Œä¸ºã€‚&lt;/p>
&lt;h4 id="mem_cap-æ ¸å¿ƒæ€è·¯">mem_cap æ ¸å¿ƒæ€è·¯&lt;/h4>
&lt;p>ToplingDB å°† &lt;code>mem_cap&lt;/code> è®¾ç½®ä¸ºè¿œå¤§äº &lt;code>write_buffer_size&lt;/code>ï¼Œä»è€Œé¿å… RocksDB åœ¨å‘ Memtable å†™å…¥æ—¶è¿‡æ—©è§¦å‘â€œå†…å­˜å·²æ»¡â€çš„é”™è¯¯ã€‚
åœ¨ CSPP åˆå§‹åŒ–ï¼ˆNewï¼‰æ—¶ï¼Œä¼šå†æ¬¡æ£€æŸ¥ï¼Œå¦‚æœå‘ç° &lt;code>mem_cap&lt;/code> è®¾ç½®è¿‡å°ï¼Œåˆ™ä¼šè‡ªåŠ¨è°ƒæ•´ä¸º &lt;code>2 * write_buffer_size&lt;/code>ï¼Œä»¥ç¡®ä¿å†™å…¥è¿‡ç¨‹çš„ç¨³å®šæ€§ã€‚&lt;/p>
&lt;p>&lt;code>mem_cap&lt;/code> é»˜è®¤å€¼ä¸º 2Gï¼Œæœ‰æ•ˆæœ€å¤§å€¼ä¸º 16Gã€‚&lt;/p>
&lt;ul>
&lt;li>å°å‹éƒ¨ç½²ï¼ˆ&amp;lt; 16GB å†…å­˜ï¼‰: å»ºè®®è®¾ç½®ä¸ºç³»ç»Ÿå†…å­˜çš„ 20-30%&lt;/li>
&lt;li>ä¸­å‹éƒ¨ç½²ï¼ˆ16-64GB å†…å­˜ï¼‰: å»ºè®®è®¾ç½®ä¸º 8-16G&lt;/li>
&lt;li>å¤§å‹éƒ¨ç½²ï¼ˆ&amp;gt; 64GB å†…å­˜ï¼‰: å»ºè®®è®¾ç½®ä¸º 16G&lt;/li>
&lt;/ul>
&lt;h3 id="use_vm">use_vm&lt;/h3>
&lt;p>åœ¨ä½¿ç”¨ malloc/posix_memalign åˆ†é…å†…å­˜æ—¶ï¼Œåœ°å€ç©ºé—´å¯èƒ½æ˜¯å·²ç»å®é™…åˆ†é…çš„ï¼ˆä½äºå †ç©ºé—´ä¸­ï¼Œå·²æœ‰å¯¹åº”çš„ç‰©ç†é¡µé¢ï¼‰ï¼Œè€Œ CSPP åœ¨åˆ†é…æ—¶åªéœ€è¦è·å¾—ä¿ç•™çš„åœ°å€ç©ºé—´ã€‚
&lt;code>use_vm&lt;/code> é€‰é¡¹ä¸º &lt;code>true&lt;/code> æ—¶ä¼šå¼ºåˆ¶ä½¿ç”¨ &lt;code>mmap&lt;/code> åˆ†é…å†…å­˜ï¼Œä»è€Œä¿è¯åˆ†é…çš„ä¸€å®šæ—¶æ˜¯ä¿ç•™åœ°å€ç©ºé—´ï¼Œä½†å¹¶ä¸å®é™…å ç”¨ç‰©ç†é¡µé¢ã€‚
&lt;code>use_vm&lt;/code> é»˜è®¤å€¼ä¸º &lt;code>true&lt;/code>ã€‚å¦‚æœç”¨æˆ·ç‰©ç†å†…å­˜ç©ºé—´å……è¶³ï¼Œå»ºè®®å…³é—­æ­¤é€‰é¡¹ï¼Œ&lt;code>mmap&lt;/code> åˆ†é…çš„è™šæ‹Ÿå†…å­˜ç©ºé—´åœ¨å»ºç«‹å¯¹ç‰©ç†åœ°å€çš„æ˜ å°„æ—¶ä¼šè§¦å‘å¤§é‡minor page faultï¼Œå¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚&lt;/p>
&lt;h3 id="convert_to_sst">convert_to_sst&lt;/h3>
&lt;p>&lt;code>convert_to_sst&lt;/code> æ”¯æŒä»¥ä¸‹ä¸‰ç§æšä¸¾å€¼:&lt;/p>
&lt;ul>
&lt;li>&lt;code>kDontConvert&lt;/code>: ç¦ç”¨è¯¥åŠŸèƒ½ï¼Œä¸ºé»˜è®¤å€¼ã€‚ä½¿ç”¨ä¼ ç»Ÿçš„ Flush æµç¨‹ï¼Œå…¼å®¹æ€§æœ€å¥½ï¼Œé€‚åˆå¯¹ç¨³å®šæ€§è¦æ±‚é«˜çš„åœºæ™¯&lt;/li>
&lt;li>&lt;code>kDumpMem&lt;/code>: è½¬åŒ–æ—¶å°† MemTable çš„æ•´å—å†…å­˜å†™å…¥ SST æ–‡ä»¶ï¼Œé¿å… CPU æ¶ˆè€—ï¼Œä½†æœªé™ä½å†…å­˜æ¶ˆè€—&lt;/li>
&lt;li>&lt;code>kFileMmap&lt;/code>: å°† MemTable å†…å®¹ mmap åˆ°æ–‡ä»¶ï¼Œè¿™æ˜¯å…³é”®åŠŸèƒ½ï¼ŒåŒæ—¶é™ä½ CPU å’Œå†…å­˜æ¶ˆè€—ï¼Œå¯åŒæ—¶å°† DBOptions.memtable_as_log_index è®¾ä¸º true ä»æœ¬è´¨ä¸Šæ¶ˆé™¤ MemTable Flush&lt;/li>
&lt;/ul>
&lt;p>è¿™äº›å‚æ•°ä¸ºæ•°æ®å†™å…¥è·¯å¾„æä¾›äº†æ›´å¤šå¯è°ƒèŠ‚ç©ºé—´ï¼Œç”¨æˆ·å¯æŒ‰éœ€é€‰æ‹©ã€‚&lt;/p>
&lt;p>æ›´å¤šè®¾è®¡ç»†èŠ‚è¯·å‚è€ƒ ToplingDB ä½œè€…çš„æ’°å†™çš„ç›¸å…³åšå®¢ï¼š&lt;a href="https://github.com/topling/cspp-memtable/blob/memtable_as_log_index/README_EN.md">cspp-memtable&lt;/a>, &lt;a href="https://zhuanlan.zhihu.com/p/649435555">ToplingDB CSPP MemTable Design Essentials&lt;/a>, &lt;a href="https://zhuanlan.zhihu.com/p/499138254">CSPP Trie Design Analysis&lt;/a>&lt;/p>
&lt;h2 id="3-tablefactory-æ‰©å±•">3. TableFactory æ‰©å±•&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>CSPPMemTabTable&lt;/strong>ï¼šä¸ &lt;code>cspp&lt;/code> MemTable é…å¥—çš„ TableFactoryã€‚&lt;/li>
&lt;li>&lt;strong>DispatcherTable&lt;/strong>ï¼šæ”¯æŒä¸ºä¸åŒå±‚çº§æŒ‡å®šä¸åŒçš„ TableFactoryï¼Œä¾‹å¦‚ï¼š
&lt;ul>
&lt;li>é»˜è®¤ä½¿ç”¨ BlockBasedTableã€‚&lt;/li>
&lt;li>ç‰¹å®šå±‚çº§å¯ä»¥ä½¿ç”¨ CSPPMemTabTableã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>è¿™ç±»çµæ´»æ€§åœ¨ RocksDB åŸç”Ÿé…ç½®ä¸­å¹¶ä¸å­˜åœ¨ã€‚&lt;/p>
&lt;h2 id="4-ç»Ÿè®¡ä¸è§‚æµ‹æ§åˆ¶">4. ç»Ÿè®¡ä¸è§‚æµ‹æ§åˆ¶&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>discard_tickers / discard_histograms&lt;/strong>ï¼šå¯ä»¥ç²¾ç¡®æŒ‡å®šå“ªäº›ç»Ÿè®¡é¡¹éœ€è¦ä¸¢å¼ƒã€‚&lt;/li>
&lt;li>&lt;strong>stats_level: kDisableAll&lt;/strong>ï¼šç»“åˆä¸Šè¿°é…ç½®ï¼Œå¯ä»¥çµæ´»æ§åˆ¶ç»Ÿè®¡å¼€é”€ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç›¸æ¯” RocksDB çš„ç²—ç²’åº¦æ§åˆ¶ï¼ŒToplingDB æä¾›äº†æ›´ç»†çš„è°ƒèŠ‚æ–¹å¼ã€‚&lt;/p>
&lt;h2 id="5-dboptions-æ–°å¢å‚æ•°">5. DBOptions æ–°å¢å‚æ•°&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>memtable_as_log_index: true&lt;/strong>ï¼šå…è®¸ä½¿ç”¨ MemTable ä½œä¸ºæ—¥å¿—ç´¢å¼•ï¼ŒåŠ å¿«æ¢å¤é€Ÿåº¦ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="6-å®‰å…¨æ³¨æ„äº‹é¡¹">6. å®‰å…¨æ³¨æ„äº‹é¡¹&lt;/h2>
&lt;p>&lt;strong>Web Server å®‰å…¨é…ç½®&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>Web Server é¡µé¢ç”±ToplingDBæä¾›ï¼Œä¸åŒ…å«æƒé™è®¤è¯åŠŸèƒ½&lt;/li>
&lt;li>é»˜è®¤è®¾ç½® &lt;code>listening_ports: '127.0.0.1:2011'&lt;/code> ä»…é™æœ¬åœ°è®¿é—®&lt;/li>
&lt;li>ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œä»…å…è®¸å†…ç½‘è®¿é—®&lt;/li>
&lt;li>å¦‚éœ€ç¦ç”¨ Web Serverï¼Œåœ¨ &lt;code>hugegraph.properties&lt;/code> ä¸­è®¾ç½® &lt;code>rocksdb.open_http=false&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>å…±äº«å†…å­˜å®‰å…¨&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;code>document_root: /dev/shm/rocksdb_resource&lt;/code> ä½¿ç”¨å…±äº«å†…å­˜ç›®å½•&lt;/li>
&lt;li>å¤šç”¨æˆ·ç¯å¢ƒéœ€è¦æ³¨æ„æ–‡ä»¶æƒé™è®¾ç½®ï¼Œé¿å…æœªæˆæƒè®¿é—®&lt;/li>
&lt;/ul>
&lt;h2 id="7-æ€»ç»“">7. æ€»ç»“&lt;/h2>
&lt;p>ToplingDB åœ¨ RocksDB çš„åŸºç¡€ä¸Šå¢åŠ äº†ä»¥ä¸‹èƒ½åŠ›ï¼š&lt;/p>
&lt;ul>
&lt;li>æ’ä»¶åŒ–é…ç½®ä¸å¯¹è±¡å¤ç”¨&lt;/li>
&lt;li>æ–°çš„ MemTable ç±»å‹ï¼ˆcsppï¼‰åŠé…å¥— TableFactory&lt;/li>
&lt;li>DispatcherTable æ”¯æŒå¤šå·¥å‚è°ƒåº¦&lt;/li>
&lt;li>å†…ç½® Web Server&lt;/li>
&lt;li>æ›´çµæ´»çš„ç»Ÿè®¡ä¸è§‚æµ‹æ§åˆ¶&lt;/li>
&lt;li>ç‰¹æ®Š DBOptionsï¼ˆå¦‚ memtable_as_log_indexï¼‰&lt;/li>
&lt;/ul>
&lt;p>è¿™äº›æ‰©å±•ä¸ºç”¨æˆ·æä¾›äº†æ›´å¤šçš„å¯è°ƒèŠ‚ç©ºé—´ï¼Œå°¤å…¶é€‚åˆéœ€è¦é«˜å†™å…¥æ€§èƒ½å’Œçµæ´»è¿ç»´çš„åœºæ™¯ã€‚&lt;/p>
&lt;h2 id="ç›¸å…³æ–‡æ¡£">ç›¸å…³æ–‡æ¡£&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="/cn/blog/2025/10/09/toplingdb-quick-start/">ToplingDB å¿«é€Ÿå¼€å§‹&lt;/a> â€“ å¦‚ä½•åœ¨ HugeGraph ä¸­å¯ç”¨ ToplingDB&lt;/li>
&lt;li>&lt;a href="https://github.com/facebook/rocksdb/wiki/Setup-Options-and-Basic-Tuning">RocksDB å®˜æ–¹é…ç½®æ–‡æ¡£&lt;/a> â€“ äº†è§£åŸºç¡€é…ç½®é¡¹&lt;/li>
&lt;li>&lt;a href="https://github.com/topling/sideplugin-wiki-en/wiki">SidePlugin Wiki&lt;/a> â€“ ToplingDB å®Œæ•´é…ç½®å‚è€ƒ&lt;/li>
&lt;/ul></description></item></channel></rss>